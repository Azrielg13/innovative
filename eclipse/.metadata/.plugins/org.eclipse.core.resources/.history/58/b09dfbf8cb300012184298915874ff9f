package com.sce.esp.object.model;

import com.sce.esp.log.EspLogger;

public class PowerPlantGroup implements Comparable<Object>{

	public static final int LABOR =45;
	
	private int costType,action;
	private double amount,qty, hrs;
	private CprPrime cprPrime;
	private CprSub cprSub;

	private PowerPlant pp;
	public PowerPlantGroup(PowerPlant pp, int action,int costType,CprPrime cprPrime,CprSub cprSub){
		this(pp,action,costType,cprPrime,cprSub,0,0,0);
	}
	public PowerPlantGroup(PowerPlant pp, int action,int costType,CprPrime cprPrime,CprSub cprSub,double qty,double amount,double hrs){
		this.pp = pp;
		this.action = action;
		this.costType = costType;
		this.cprPrime = cprPrime;
		this.cprSub = cprSub;
		this.qty =qty;
		this.amount=amount;
		this.hrs=hrs;
		
	}
	public CprPrime getCprPrime() {
		return cprPrime;
	}
	public void setCprPrime(CprPrime cprPrime) {
		this.cprPrime = cprPrime;
	}
	public CprSub getCprSub() {
		return cprSub;
	}
	public void setCprSub(CprSub cprSub) {
		this.cprSub = cprSub;
	}
	public int getCostType() {
		return costType;
	}


	public void setCostType(int costType) {
		this.costType = costType;
	}

	
	public double getHrs() {
		return hrs;
	}


	public void setHrs(double hrs) {
		this.hrs = hrs;
	}
	
	public void addHrs(double hrs) {
		this.hrs += hrs;
	}

	public double getAmount() {
		return amount;
	}


	public void setAmount(double amount) {
		this.amount = amount;
	}


	
	public double getQty() {
		return qty;
	}


	public void setQty(int qty) {
		this.qty = qty;
	}


//	@Override
//	public int hashCode() {
//		int prime = 31;
//		int result = 1;
//		result = prime * result + costType;
//		result = prime * result + ((cprPrime == null) ? 0 : cprPrime.hashCode());
//		result = prime * result + ((cprSub == null) ? 0 : cprSub.hashCode());
//		return result;
//	}
//	@Override
//	public boolean equals(Object obj) {
//		if (this == obj)
//			return true;
//		if (obj == null)
//			return false;
//		if (getClass() != obj.getClass())
//			return false;
//		PowerPlantGroup other = (PowerPlantGroup) obj;
//		if (costType != other.costType)
//			return false;
//		if (cpr == null) {
//			if (other.cpr != null)
//				return false;
//		} else if (!cpr.equals(other.cpr))
//			return false;
//		return true;
//	}


	public void addQty(double powerPlantCount) {
		qty+=powerPlantCount;
		
	}


	public void addAmount(double totUnitCost) {
		amount+=totUnitCost;
		
	}
	
	public String getType(){
		switch(this.costType){
			case CostType.MATERIAL_GROUP: return "MTL";
			case LABOR: return ""+pp.getLaborTitle();
		}
		return null;
	}
	public String getAction() {
		switch(this.action){
			case LookUp.EXPENSE: return "EXPENSE";
			case LookUp.INSTALL: return "INSTALL";
			case LookUp.REMOVE: return "REMOVE";
		}
		return this.action+"";
	}
	public Integer getActionId() {
		return action;
	}
	@Override
	public int compareTo(Object o){
		if(o instanceof PowerPlantGroup){
			PowerPlantGroup ppg = (PowerPlantGroup)o;
			int ret = getActionId().compareTo(ppg.getActionId());
			if(ret!=0) return ret;
			if(getCostType()!=LABOR && ppg.getCostType()==LABOR) return -1;
			if(getCostType()==LABOR && ppg.getCostType()!=LABOR) return 1;
			if(getAmount()>ppg.getAmount()) return -1;
			if(getAmount()<ppg.getAmount()) return 1;
			return getCpr().compareTo(getCpr());
		}
		return toString().compareTo(o.toString());
	}
	public String getCpr() {
		String cpr = "";
		if(getCprPrime()!=null)
			cpr += getCprPrime().getPrime();
		if(getCprSub()!=null)
			cpr += "."+getCprSub().getSub();
		return cpr;
	}

}
