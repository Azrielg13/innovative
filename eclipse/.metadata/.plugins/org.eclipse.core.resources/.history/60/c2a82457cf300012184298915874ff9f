package com.sce.esp.object.model;

import java.sql.SQLException;
import java.util.Calendar;

import com.sce.esp.log.EspLogger;
import com.sce.esp.object.ESPTestCase;

public class CutOverTest extends ESPTestCase {
	public void testReserves() throws SQLException{
		int newPy = Calendar.getInstance().get(Calendar.YEAR)+1;
		for(Sub sub:Department.getInstance(newPy).getSubs()){
			if(sub.getSubName().charAt(0) < 'D')
			{
				Sub prev = sub.getPrevInstance();
				int pLSb = (int)Math.round(prev.getYear(0, newPy+9).getCriteriaReserve()*sub.getMVAFactor());
				int pLIs = (int)Math.round(sub.getYear(0, newPy+9).getCriteriaReserve()*sub.getMVAFactor());
				if(pLSb == pLIs)
					EspLogger.message(this, sub+" OK");
				else
					EspLogger.error(this, sub+" Reserve Sb: "+pLSb+" but is "+pLIs);
			}
		}
	}
}
