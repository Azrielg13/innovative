package com.sce.esp.object.model;


import com.sce.esp.log.EspLogger;
import com.sce.esp.object.jpa.EntityManagerHelper;
import com.sce.esp.util.ESPProperties;

public class ThreadSafe extends Thread{
	static{
		try {
			EspLogger.init(false, EspLogger.LEVEL.MESSAGE);
			EntityManagerHelper.init(ESPProperties.getInstance().getDevDbUrl(), "mayfiee", "edison", System.getProperty("user.name").toLowerCase());
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	private String name;
	private int timeOut;
	public ThreadSafe(String name, int timeOut){
		this.name = name;
		this.timeOut = timeOut;
	}
	@Override
	public void run(){
		try {
			for(SceProjElemCost spec:SceProjElemCost.getCollection(new String[]{"INSERT_USER_ID"}, 62)){
				EspLogger.message(this,name+": "+spec+" "+spec.getInsertUserId()+" "+spec.getInsertUser());
				Thread.sleep(timeOut);
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
	/**
	 * @param args
	 */
	public static void main(String[] args) {
		ThreadSafe ts1 = new ThreadSafe("Eddie",100);
		ThreadSafe ts2 = new ThreadSafe("Frank",100);
		ts1.start();
		ts2.run();
	}

}
