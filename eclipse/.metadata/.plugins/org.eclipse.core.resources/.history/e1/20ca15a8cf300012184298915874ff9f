/*
 * Copyright (c) 2002-2010 ESP Suite. All Rights Reserved.
 *
 *     
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" 
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, 
 * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR 
 * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, 
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, 
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; 
 * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, 
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE 
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, 
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
 * 
 * Authors: Technology Integration Group, SCE
 * Developers: Eddie Mayfield, Frank Gonzales, Augustin Muniz,
 * Kate Suwan, Hiro Kushida, Andrew McNaughton, Brian Stonerock,
 * Russell Ragsdale, Patrick Ridge, Everett Aragon.
 * 
 */
package com.sce.esp.util.ui;

import java.awt.Dimension;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Toolkit;
import java.net.URL;

import javax.swing.JFrame;

import com.sce.esp.log.EspLogger;
import com.sce.esp.object.model.User;
import com.sce.esp.util.ESPProperties;
import com.sce.esp.util.IconsFactory;

/**
 * @author TIG
 *
 */
public class HelpBrowser {
	
	public final static String BASEURL = "/ipg/Wiki.jsp?uid="+User.getActiveUser().getUsername() + "&name=" + User.getActiveUser();
	
	private static WebBrowser bf;	
	
	public static void createExternalHelp() throws Exception{
		
		bf = new WebBrowser(new URL(ESPProperties.getInstance().getBaseTestUrl()+BASEURL+"").toString());
		bf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);       
		bf.setTitle("Interactive Planning Guide");
		bf.setIconImage(IconsFactory.getImageIcon(IconsFactory.Frame.HELP).getImage());
		bf.setPreferredSize(new Dimension(1024,768));
		bf.pack();
		centerWindow(bf);
		bf.setVisible(true);
		
		System.out.println("JDIC Plus Loaded...");
	}
	
	public static void createExternalHelp(URL url) throws Exception{
		bf = new WebBrowser(url.toString());
		bf.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);       
		bf.setTitle("Interactive Planning Guide");
		bf.setIconImage(IconsFactory.getImageIcon(IconsFactory.Frame.HELP).getImage());
		bf.setPreferredSize(new Dimension(1024,768));
		bf.pack();
		centerWindow(bf);
		bf.setVisible(true);
	}
	
	public static void centerWindow(JFrame helpFrame){
		Rectangle screen = new Rectangle(
				Toolkit.getDefaultToolkit().getScreenSize());
		Point center = new Point(
				(int) screen.getCenterX(), (int) screen.getCenterY());
		Point newLocation = new Point(
				center.x - helpFrame.getWidth() / 2, center.y - helpFrame.getHeight() / 2);
		if (screen.contains(newLocation.x, newLocation.y,
				helpFrame.getWidth(), helpFrame.getHeight())) {
			helpFrame.setLocation(newLocation);
		}
	} // centerWindow()


	public static void getInstance(String wikiPage) {
		try {EspLogger.message("URL", ESPProperties.getInstance().getBaseTestUrl()+BASEURL+"&page="+wikiPage);
			createExternalHelp(new URL(ESPProperties.getInstance().getBaseTestUrl()+BASEURL+"&page="+wikiPage));
		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}
}