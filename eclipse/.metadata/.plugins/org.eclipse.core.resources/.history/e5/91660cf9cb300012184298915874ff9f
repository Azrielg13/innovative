/**
 * 
 */
package com.sce.esp.object.model;

import java.text.SimpleDateFormat;
import java.util.Calendar;

import com.sce.esp.util.Calculate;

/**
 * @author gonzalf1
 *
 */
public class ForecastHour {
	private Weatherstation ws;
	private Calendar date;
	private int hour;
	private int temperature;
	private String wind;

	/**
	 * 
	 */
	public ForecastHour(Weatherstation ws, Calendar date) {
		this.ws=ws;
		this.date=date;
	}
	
	/**
	 * @return the weather station
	 */
	public Weatherstation getWeatherstation(){
		return ws;
	}
	
	/**
	 * @return the date
	 */
	public Calendar getDate() {
		return date;
	}

	/**
	 * @return the hour
	 */
	public int getHour() {
		return hour;
	}

	/**
	 * @param hour the hour to set
	 */
	public void setHour(int hour) {
		this.hour = hour;
	}

	/**
	 * @return the temperature
	 */
	public int getTemperature() {
		return temperature;
	}

	/**
	 * @param temperature the temperature to set
	 */
	public void setTemperature(int temperature) {
		this.temperature = temperature;
	}
	
	public String toString(){
		return "ForecastHour ["+new SimpleDateFormat("MM/dd/yyyy").format(this.getDate().getTime())+
		", Hour="+this.getHour()+", TemperatureF="+this.getTemperature()+"]";
	}
	
	/**
	 * @param text obtained from NOAA
	 * @return the value in calendar format
	 */
	public static Calendar parseString(String text){
		Calendar c = null;
		try{
		String year = text.substring(0, 4);
		String month = text.substring(5, 7);
		String day = text.substring(8, 10);
		String hour = text.substring(11, 13);
		c = Calculate.getCal(Integer.parseInt(year), Integer.parseInt(month)-1, Integer.parseInt(day),
									  Integer.parseInt(hour), 0, 0);
		}catch(Exception e){}
		return c;
	}
	
	public static String getHistHourUrl(Weatherstation w) throws Exception{
		String url = "";
		
		if(w.getStationName().equalsIgnoreCase("Rosemead_wn"))//USC
			url = "http://www.wrh.noaa.gov/mesowest/getobext.php?wfo=lox&sid=KCQT&num=168&raw=0&dbn=m&banner=header";
		if(w.getStationName().equalsIgnoreCase("San Dimas_wn"))//Claremont
			url = "http://www.wrh.noaa.gov/mesowest/getobext.php?wfo=lox&sid=CMOC1&num=168&raw=0&dbn=m&banner=header";
		
		return url;
	}

	public void setWind(String wind) {
		this.wind=wind;
	}
	
	public String getWind(){
		return wind;
	}
}