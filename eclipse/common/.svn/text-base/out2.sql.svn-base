--================== LOOK UP ====================
--ORG
ALTER TABLE MDI.MDI002_ORG DROP CONSTRAINT MDI002_FK_INSERTUSERID;
ALTER TABLE MDI.MDI002_ORG ADD CONSTRAINT MDI002_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI002_ORG DROP CONSTRAINT MDI002_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI002_ORG ADD CONSTRAINT MDI002_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI002_ORG DROP CONSTRAINT MDI002_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI002_ORG ADD CONSTRAINT MDI002_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI002_U;
--DEPARTMENT
ALTER TABLE MDI.MDI010_DEPARTMENT DROP CONSTRAINT MDI010_FK_INSERTUSERID;
ALTER TABLE MDI.MDI010_DEPARTMENT ADD CONSTRAINT MDI010_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI010_DEPARTMENT DROP CONSTRAINT MDI010_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI010_DEPARTMENT ADD CONSTRAINT MDI010_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI010_DEPARTMENT DROP CONSTRAINT MDI010_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI010_DEPARTMENT ADD CONSTRAINT MDI010_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--DEPARTMENT YEAR
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR DROP CONSTRAINT MDI015_FK_INSERTUSERID;
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR ADD CONSTRAINT MDI015_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR DROP CONSTRAINT MDI015_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR ADD CONSTRAINT MDI015_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR DROP CONSTRAINT MDI015_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI015_DEPARTMENT_YEAR ADD CONSTRAINT MDI015_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SIMULATION
ALTER TABLE MDI.MDI020_SIMULATION DROP CONSTRAINT MDI020_FK_INSERTUSERID;
ALTER TABLE MDI.MDI020_SIMULATION ADD CONSTRAINT MDI020_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI020_SIMULATION DROP CONSTRAINT MDI020_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI020_SIMULATION ADD CONSTRAINT MDI020_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI020_SIMULATION DROP CONSTRAINT MDI020_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI020_SIMULATION ADD CONSTRAINT MDI020_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI020_I;


--SYS
ALTER TABLE MDI.MDI060_SYS DROP CONSTRAINT MDI060_FK_INSERTUSERID;
ALTER TABLE MDI.MDI060_SYS ADD CONSTRAINT MDI060_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI060_SYS DROP CONSTRAINT MDI060_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI060_SYS ADD CONSTRAINT MDI060_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI060_SYS DROP CONSTRAINT MDI060_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI060_SYS ADD CONSTRAINT MDI060_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI060_I;
DROP INDEX MDI060_U1;
DROP INDEX MDI060_U2;
CREATE INDEX MDI.MDI060_PLANYEAR_REGIONID ON MDI.MDI060_SYS (PLANYEAR,REGION_ID);
--SYS MONTHLY
ALTER TABLE MDI.MDI065_SYS_MONTHLY DROP CONSTRAINT MDI065_FK_INSERTUSERID;
ALTER TABLE MDI.MDI065_SYS_MONTHLY ADD CONSTRAINT MDI065_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI065_SYS_MONTHLY DROP CONSTRAINT MDI065_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI065_SYS_MONTHLY ADD CONSTRAINT MDI065_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI065_SYS_MONTHLY DROP CONSTRAINT MDI065_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI065_SYS_MONTHLY ADD CONSTRAINT MDI065_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SYS YEAR
ALTER TABLE MDI.MDI070_SYS_YEAR DROP CONSTRAINT MDI070_FK_INSERTUSERID;
ALTER TABLE MDI.MDI070_SYS_YEAR ADD CONSTRAINT MDI070_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI070_SYS_YEAR DROP CONSTRAINT MDI070_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI070_SYS_YEAR ADD CONSTRAINT MDI070_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI070_SYS_YEAR DROP CONSTRAINT MDI070_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI070_SYS_YEAR ADD CONSTRAINT MDI070_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SYS DAILY
ALTER TABLE MDI.MDI080_SYS_DAILY DROP CONSTRAINT MDI080_FK_INSERTUSERID;
ALTER TABLE MDI.MDI080_SYS_DAILY ADD CONSTRAINT MDI080_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI080_SYS_DAILY DROP CONSTRAINT MDI080_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI080_SYS_DAILY ADD CONSTRAINT MDI080_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI080_SYS_DAILY DROP CONSTRAINT MDI080_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI080_SYS_DAILY ADD CONSTRAINT MDI080_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--MVA FACTOR
ALTER TABLE MDI.MDI100_MVA_FACTOR MODIFY VOLTAGE_KV FLOAT(24);
ALTER TABLE MDI.MDI100_MVA_FACTOR DROP CONSTRAINT MDI100_FK_INSERTUSERID;
ALTER TABLE MDI.MDI100_MVA_FACTOR ADD CONSTRAINT MDI100_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI100_MVA_FACTOR DROP CONSTRAINT MDI100_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI100_MVA_FACTOR ADD CONSTRAINT MDI100_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI100_MVA_FACTOR DROP CONSTRAINT MDI100_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI100_MVA_FACTOR ADD CONSTRAINT MDI100_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--ELEM
ALTER TABLE MDI.MDI535_ELEM DROP CONSTRAINT MDI535_FK_INSERTUSERID;
ALTER TABLE MDI.MDI535_ELEM ADD CONSTRAINT MDI535_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI535_ELEM DROP CONSTRAINT MDI535_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI535_ELEM ADD CONSTRAINT MDI535_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI535_ELEM DROP CONSTRAINT MDI535_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI535_ELEM ADD CONSTRAINT MDI535_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI535_U;

--PROG
ALTER TABLE MDI.MDI110_PROG DROP CONSTRAINT MDI110_FK_INSERTUSERID;
ALTER TABLE MDI.MDI110_PROG ADD CONSTRAINT MDI110_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI110_PROG DROP CONSTRAINT MDI110_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI110_PROG ADD CONSTRAINT MDI110_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI110_PROG DROP CONSTRAINT MDI110_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI110_PROG ADD CONSTRAINT MDI110_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI110_U;

--SCE PROJ
ALTER TABLE MDI.MDIS35_SCE_PROJ DROP CONSTRAINT MDIS35_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS35_SCE_PROJ ADD CONSTRAINT MDIS35_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS35_SCE_PROJ DROP CONSTRAINT MDIS35_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS35_SCE_PROJ ADD CONSTRAINT MDIS35_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS35_SCE_PROJ DROP CONSTRAINT MDIS35_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS35_SCE_PROJ ADD CONSTRAINT MDIS35_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROGRAM
ALTER TABLE MDI.MDIS20_PROGRAM DROP CONSTRAINT MDIS20_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS20_PROGRAM ADD CONSTRAINT MDIS20_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS20_PROGRAM DROP CONSTRAINT MDIS20_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS20_PROGRAM ADD CONSTRAINT MDIS20_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS20_PROGRAM DROP CONSTRAINT MDIS20_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS20_PROGRAM ADD CONSTRAINT MDIS20_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS20_U1;
--SYS YEAR SCE PROJ
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ DROP CONSTRAINT MDI212_FK_INSERTUSERID;
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ ADD CONSTRAINT MDI212_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ DROP CONSTRAINT MDI212_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ ADD CONSTRAINT MDI212_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ DROP CONSTRAINT MDI212_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI212_SYS_YEAR_SCE_PROJ ADD CONSTRAINT MDI212_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROGRAM YEAR
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR DROP CONSTRAINT MDIS23_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR ADD CONSTRAINT MDIS23_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR DROP CONSTRAINT MDIS23_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR ADD CONSTRAINT MDIS23_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR DROP CONSTRAINT MDIS23_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS23_PROGRAM_YEAR ADD CONSTRAINT MDIS23_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROGRAM SPONSOR
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR DROP CONSTRAINT MDIS26_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR ADD CONSTRAINT MDIS26_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR DROP CONSTRAINT MDIS26_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR ADD CONSTRAINT MDIS26_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR DROP CONSTRAINT MDIS26_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS26_PROGRAM_SPONSOR ADD CONSTRAINT MDIS26_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SAP WBS
ALTER TABLE MDI.MDIS30_SAP_WBS DROP CONSTRAINT MDIS30_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS30_SAP_WBS ADD CONSTRAINT MDIS30_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS30_SAP_WBS DROP CONSTRAINT MDIS30_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS30_SAP_WBS ADD CONSTRAINT MDIS30_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS30_SAP_WBS DROP CONSTRAINT MDIS30_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS30_SAP_WBS ADD CONSTRAINT MDIS30_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS30_U1;
--Overhead Key
CREATE SEQUENCE MDI.MDIU72_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU72_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU72_OVERHEAD_KEY(
	ID NUMBER(9) NOT NULL,
	NAME UNKNOWN(124),
	DECRIPTION NUMBER(9),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU72_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU72_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU72_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU72_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
GRANT SELECT ON MDI.MDIU72_OVERHEAD_KEY TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU72_OVERHEAD_KEY TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU72_OVERHEAD_KEY TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU72_OVERHEAD_KEY TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU72_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU72_OVERHEAD_KEY
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU72_OVERHEAD_KEY',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU72_OVERHEAD_KEY',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU72_OVERHEAD_KEY',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCE ELEM
ALTER TABLE MDI.MDIS70_SCE_ELEM DROP CONSTRAINT MDIS70_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS70_SCE_ELEM ADD CONSTRAINT MDIS70_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS70_SCE_ELEM DROP CONSTRAINT MDIS70_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS70_SCE_ELEM ADD CONSTRAINT MDIS70_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS70_SCE_ELEM DROP CONSTRAINT MDIS70_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS70_SCE_ELEM ADD CONSTRAINT MDIS70_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS70_U;
--SCE PROG ELEM
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM DROP CONSTRAINT MDIS73_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM ADD CONSTRAINT MDIS73_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM DROP CONSTRAINT MDIS73_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM ADD CONSTRAINT MDIS73_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM DROP CONSTRAINT MDIS73_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS73_SCE_PROG_ELEM ADD CONSTRAINT MDIS73_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--SYS YEAR SCE COST
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST DROP CONSTRAINT MDI547_FK_INSERTUSERID;
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST ADD CONSTRAINT MDI547_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST DROP CONSTRAINT MDI547_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST ADD CONSTRAINT MDI547_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST DROP CONSTRAINT MDI547_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI547_SYS_YEAR_SCE_COST ADD CONSTRAINT MDI547_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CPR Prime Acct
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT DROP CONSTRAINT MDISC2_FK_INSERTUSERID;
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT ADD CONSTRAINT MDISC2_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT DROP CONSTRAINT MDISC2_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT ADD CONSTRAINT MDISC2_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT DROP CONSTRAINT MDISC2_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISC2_CPR_PRIME_ACCT ADD CONSTRAINT MDISC2_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CPR Plant
ALTER TABLE MDI.MDISC0_CPR_PLANT DROP CONSTRAINT MDISC0_FK_INSERTUSERID;
ALTER TABLE MDI.MDISC0_CPR_PLANT ADD CONSTRAINT MDISC0_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISC0_CPR_PLANT DROP CONSTRAINT MDISC0_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISC0_CPR_PLANT ADD CONSTRAINT MDISC0_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISC0_CPR_PLANT DROP CONSTRAINT MDISC0_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISC0_CPR_PLANT ADD CONSTRAINT MDISC0_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CPR SUB
CREATE SEQUENCE MDI.MDISC8_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISC8_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISC8_CPR_SUB(
	ID NUMBER(9) NOT NULL,
	CPR_PLANT_ID NUMBER(9) NOT NULL,
	CPR_SUB_ACCT_ID NUMBER(9) NOT NULL,
	FUNDING_TYPE_ID NUMBER(9),
	SUB VARCHAR2(5) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISC8_PK PRIMARY KEY (ID),
	CONSTRAINT MDISC8_FK1 FOREIGN KEY (CPR_PLANT_ID) REFERENCES MDI.MDISC0_CPR_PLANT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC8_FK2 FOREIGN KEY (CPR_SUB_ACCT_ID) REFERENCES MDI.MDISC6_CPR_SUB_ACCT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC8_FK3 FOREIGN KEY (FUNDING_TYPE_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC8_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC8_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC8_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISC8_CPRPLANTID ON MDI.MDISC8_CPR_SUB (CPR_PLANT_ID);
CREATE INDEX MDI.MDISC8_CPRSUBACCTID ON MDI.MDISC8_CPR_SUB (CPR_SUB_ACCT_ID);
GRANT SELECT ON MDI.MDISC8_CPR_SUB TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISC8_CPR_SUB TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISC8_CPR_SUB TO MDI_R_USER;
GRANT DELETE ON MDI.MDISC8_CPR_SUB TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISC8_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISC8_CPR_SUB
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC8_CPR_SUB',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC8_CPR_SUB',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC8_CPR_SUB',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--CO TYPE
ALTER TABLE MDI.MDIS05_CO_TYPE DROP CONSTRAINT MDIS05_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS05_CO_TYPE ADD CONSTRAINT MDIS05_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS05_CO_TYPE DROP CONSTRAINT MDIS05_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS05_CO_TYPE ADD CONSTRAINT MDIS05_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS05_CO_TYPE DROP CONSTRAINT MDIS05_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS05_CO_TYPE ADD CONSTRAINT MDIS05_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS05_U;
--SCOPE ITEM
ALTER TABLE MDI.MDISX3_SCOPE_ITEM ADD CONSTRAINT MDISX3_FK06 FOREIGN KEY (CPR_PRIME_ID) REFERENCES MDI.MDISC4_CPR_PRIME (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM ADD CONSTRAINT MDISX3_FK07 FOREIGN KEY (CPR_SUB_ID) REFERENCES MDI.MDISC8_CPR_SUB (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM DROP CONSTRAINT MDISX3_FK_INSERTUSERID;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM ADD CONSTRAINT MDISX3_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM DROP CONSTRAINT MDISX3_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM ADD CONSTRAINT MDISX3_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM DROP CONSTRAINT MDISX3_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISX3_SCOPE_ITEM ADD CONSTRAINT MDISX3_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDISX3_I1;
CREATE INDEX MDI.MDISX3_COSTID ON MDI.MDISX3_SCOPE_ITEM (COST_ID);


--SCOPE ITEM COST YEAR
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR DROP CONSTRAINT MDISX4_FK_INSERTUSERID;
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR ADD CONSTRAINT MDISX4_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR DROP CONSTRAINT MDISX4_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR ADD CONSTRAINT MDISX4_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR DROP CONSTRAINT MDISX4_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISX4_SCOPE_ITEM_COST_YEAR ADD CONSTRAINT MDISX4_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--Cost Type
ALTER TABLE MDI.MDIU25_COST_TYPE DROP CONSTRAINT MDIU25_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU25_COST_TYPE ADD CONSTRAINT MDIU25_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU25_COST_TYPE DROP CONSTRAINT MDIU25_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU25_COST_TYPE ADD CONSTRAINT MDIU25_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU25_COST_TYPE DROP CONSTRAINT MDIU25_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU25_COST_TYPE ADD CONSTRAINT MDIU25_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SCOPE UNIT COST
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST ADD ACTION_ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST ADD CONSTRAINT MDISX2_FK06 FOREIGN KEY (ACTION_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST DROP CONSTRAINT MDISX2_FK_INSERTUSERID;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST ADD CONSTRAINT MDISX2_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST DROP CONSTRAINT MDISX2_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST ADD CONSTRAINT MDISX2_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST DROP CONSTRAINT MDISX2_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISX2_SCOPE_UNIT_COST ADD CONSTRAINT MDISX2_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDISX2_I1;
CREATE INDEX MDI.MDISX2_SCOPETYPEID ON MDI.MDISX2_SCOPE_UNIT_COST (SCOPE_TYPE_ID);
--SCOPE UNIT COST YEAR
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR DROP CONSTRAINT MDISX5_FK_INSERTUSERID;
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR ADD CONSTRAINT MDISX5_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR DROP CONSTRAINT MDISX5_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR ADD CONSTRAINT MDISX5_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR DROP CONSTRAINT MDISX5_FK_DELETEDUSERID;
ALTER TABLE MDI.MDISX5_SCOPE_UNIT_COST_YEAR ADD CONSTRAINT MDISX5_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--Cost Type Rate
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE MODIFY EFF_DATE DATE;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE DROP CONSTRAINT MDIU30_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE ADD CONSTRAINT MDIU30_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE DROP CONSTRAINT MDIU30_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE ADD CONSTRAINT MDIU30_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE DROP CONSTRAINT MDIU30_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU30_COST_TYPE_RATE ADD CONSTRAINT MDIU30_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--Proj Cost Rate
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE DROP CONSTRAINT MDIU35_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE ADD CONSTRAINT MDIU35_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE DROP CONSTRAINT MDIU35_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE ADD CONSTRAINT MDIU35_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE DROP CONSTRAINT MDIU35_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU35_PROJ_COST_RATE ADD CONSTRAINT MDIU35_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--Sce Proj Elem Labor
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR DROP CONSTRAINT MDIU40_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR ADD CONSTRAINT MDIU40_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR DROP CONSTRAINT MDIU40_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR ADD CONSTRAINT MDIU40_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR DROP CONSTRAINT MDIU40_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU40_SCE_PROJ_ELEM_LABOR ADD CONSTRAINT MDIU40_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--Scope Item Labor
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR DROP CONSTRAINT MDIU45_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR ADD CONSTRAINT MDIU45_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR DROP CONSTRAINT MDIU45_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR ADD CONSTRAINT MDIU45_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR DROP CONSTRAINT MDIU45_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU45_SCOPE_ITEM_LABOR ADD CONSTRAINT MDIU45_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--Scope Item Per Unit
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT DROP CONSTRAINT MDIU50_FK_INSERTUSERID;
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT ADD CONSTRAINT MDIU50_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT DROP CONSTRAINT MDIU50_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT ADD CONSTRAINT MDIU50_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT DROP CONSTRAINT MDIU50_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIU50_SCOPE_ITEM_PER_UNIT ADD CONSTRAINT MDIU50_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--SCE PROJ REV
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV MODIFY DESCRIPTION UNKNOWN(4000);
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV DROP CONSTRAINT MDIS40_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV ADD CONSTRAINT MDIS40_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV DROP CONSTRAINT MDIS40_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV ADD CONSTRAINT MDIS40_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV DROP CONSTRAINT MDIS40_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS40_SCE_PROJ_REV ADD CONSTRAINT MDIS40_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS40_IX1;
DROP INDEX MDIS40_PROGRAM_INDEX;

CREATE INDEX MDI.MDIS40_PROGRAMID ON MDI.MDIS40_SCE_PROJ_REV (PROGRAM_ID);
CREATE INDEX MDI.MDIS40_SCEPROJID ON MDI.MDIS40_SCE_PROJ_REV (SCE_PROJ_ID);
--FILE CAT
ALTER TABLE MDI.MDI003_FILE_CAT DROP CONSTRAINT MDI003_FK_INSERTUSERID;
ALTER TABLE MDI.MDI003_FILE_CAT ADD CONSTRAINT MDI003_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI003_FILE_CAT DROP CONSTRAINT MDI003_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI003_FILE_CAT ADD CONSTRAINT MDI003_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI003_FILE_CAT DROP CONSTRAINT MDI003_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI003_FILE_CAT ADD CONSTRAINT MDI003_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI003_U;
--PROJ FILE
ALTER TABLE MDI.MDIS45_PROJ_FILE DROP CONSTRAINT MDIS45_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS45_PROJ_FILE ADD CONSTRAINT MDIS45_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS45_PROJ_FILE DROP CONSTRAINT MDIS45_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS45_PROJ_FILE ADD CONSTRAINT MDIS45_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS45_PROJ_FILE DROP CONSTRAINT MDIS45_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS45_PROJ_FILE ADD CONSTRAINT MDIS45_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROJ REV FILE
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE DROP CONSTRAINT MDIS47_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE ADD CONSTRAINT MDIS47_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE DROP CONSTRAINT MDIS47_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE ADD CONSTRAINT MDIS47_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE DROP CONSTRAINT MDIS47_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS47_PROJ_REV_FILE ADD CONSTRAINT MDIS47_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--PROJ RESOURCE EVAL
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL DROP CONSTRAINT MDIS50_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL ADD CONSTRAINT MDIS50_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL DROP CONSTRAINT MDIS50_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL ADD CONSTRAINT MDIS50_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL DROP CONSTRAINT MDIS50_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS50_PROJ_RESOURCE_EVAL ADD CONSTRAINT MDIS50_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--WORK GROUP
ALTER TABLE MDI.MDIS13_WORK_GROUP DROP CONSTRAINT MDIS13_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS13_WORK_GROUP ADD CONSTRAINT MDIS13_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS13_WORK_GROUP DROP CONSTRAINT MDIS13_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS13_WORK_GROUP ADD CONSTRAINT MDIS13_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS13_WORK_GROUP DROP CONSTRAINT MDIS13_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS13_WORK_GROUP ADD CONSTRAINT MDIS13_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS13_U;
--DISCIPLINE
ALTER TABLE MDI.MDIS15_DISCIPLINE DROP CONSTRAINT MDIS15_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS15_DISCIPLINE ADD CONSTRAINT MDIS15_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS15_DISCIPLINE DROP CONSTRAINT MDIS15_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS15_DISCIPLINE ADD CONSTRAINT MDIS15_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS15_DISCIPLINE DROP CONSTRAINT MDIS15_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS15_DISCIPLINE ADD CONSTRAINT MDIS15_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS15_U;
--PROJ WORK GROUP DIS
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS DROP CONSTRAINT MDIS57_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS ADD CONSTRAINT MDIS57_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS DROP CONSTRAINT MDIS57_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS ADD CONSTRAINT MDIS57_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS DROP CONSTRAINT MDIS57_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS57_PROJ_WORK_GROUP_DIS ADD CONSTRAINT MDIS57_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS57_RESOURCEEVALID_WORKGROUPID_TYPE ON MDI.MDIS57_PROJ_WORK_GROUP_DIS (RESOURCE_EVAL_ID,WORK_GROUP_ID,TYPE);
--WORK GROUP DIS
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS DROP CONSTRAINT MDIS17_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS ADD CONSTRAINT MDIS17_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS DROP CONSTRAINT MDIS17_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS ADD CONSTRAINT MDIS17_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS DROP CONSTRAINT MDIS17_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS17_WORK_GROUP_DIS ADD CONSTRAINT MDIS17_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--PROJ WORK GROUP
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP DROP CONSTRAINT MDIS55_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP ADD CONSTRAINT MDIS55_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP DROP CONSTRAINT MDIS55_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP ADD CONSTRAINT MDIS55_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP DROP CONSTRAINT MDIS55_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS55_PROJ_WORK_GROUP ADD CONSTRAINT MDIS55_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--MAJOR MTL
ALTER TABLE MDI.MDIS29_MAJOR_MTL DROP CONSTRAINT MDIS29_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS29_MAJOR_MTL ADD CONSTRAINT MDIS29_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS29_MAJOR_MTL DROP CONSTRAINT MDIS29_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS29_MAJOR_MTL ADD CONSTRAINT MDIS29_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS29_MAJOR_MTL DROP CONSTRAINT MDIS29_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS29_MAJOR_MTL ADD CONSTRAINT MDIS29_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS29_U1;
--PROJ MAJOR MTL
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL DROP CONSTRAINT MDIS60_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL ADD CONSTRAINT MDIS60_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL DROP CONSTRAINT MDIS60_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL ADD CONSTRAINT MDIS60_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL DROP CONSTRAINT MDIS60_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS60_PROJ_MAJOR_MTL ADD CONSTRAINT MDIS60_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--PROJ REV OFFSET
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET DROP CONSTRAINT MDIS65_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET ADD CONSTRAINT MDIS65_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET DROP CONSTRAINT MDIS65_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET ADD CONSTRAINT MDIS65_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET DROP CONSTRAINT MDIS65_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS65_PROJ_REV_OFFSET ADD CONSTRAINT MDIS65_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--SCE PROJ TRACKING
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING DROP CONSTRAINT MDIS90_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING ADD CONSTRAINT MDIS90_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING DROP CONSTRAINT MDIS90_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING ADD CONSTRAINT MDIS90_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING DROP CONSTRAINT MDIS90_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS90_SCE_PROJ_TRACKING ADD CONSTRAINT MDIS90_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS90_I1;
CREATE INDEX MDI.MDIS90_SCEPROJREVID ON MDI.MDIS90_SCE_PROJ_TRACKING (SCE_PROJ_REV_ID);
--SCE PROJ TRACKING DEP
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP DROP CONSTRAINT MDIS92_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP ADD CONSTRAINT MDIS92_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP DROP CONSTRAINT MDIS92_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP ADD CONSTRAINT MDIS92_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP DROP CONSTRAINT MDIS92_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS92_SCE_PROJ_TRACKING_DEP ADD CONSTRAINT MDIS92_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS92_I1;
CREATE INDEX MDI.MDIS92_DEPTID ON MDI.MDIS92_SCE_PROJ_TRACKING_DEP (DEP_T_ID);

--Task Type
ALTER TABLE MDI.MDIT00_TASK_TYPE DROP CONSTRAINT MDIT00_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT00_TASK_TYPE ADD CONSTRAINT MDIT00_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT00_TASK_TYPE DROP CONSTRAINT MDIT00_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT00_TASK_TYPE ADD CONSTRAINT MDIT00_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT00_TASK_TYPE DROP CONSTRAINT MDIT00_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT00_TASK_TYPE ADD CONSTRAINT MDIT00_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--SCHEDULE
ALTER TABLE MDI.MDIT16_SCHEDULE ADD GROUP_ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDIT16_SCHEDULE ADD CONSTRAINT MDIT16_FK1 FOREIGN KEY (GROUP_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDIT16_SCHEDULE DROP CONSTRAINT MDIT16_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT16_SCHEDULE ADD CONSTRAINT MDIT16_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT16_SCHEDULE DROP CONSTRAINT MDIT16_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT16_SCHEDULE ADD CONSTRAINT MDIT16_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT16_SCHEDULE DROP CONSTRAINT MDIT16_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT16_SCHEDULE ADD CONSTRAINT MDIT16_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--TASK
ALTER TABLE MDI.MDIS88_TASK DROP CONSTRAINT MDIS88_FK_INSERTUSERID;
ALTER TABLE MDI.MDIS88_TASK ADD CONSTRAINT MDIS88_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS88_TASK DROP CONSTRAINT MDIS88_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIS88_TASK ADD CONSTRAINT MDIS88_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS88_TASK DROP CONSTRAINT MDIS88_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIS88_TASK ADD CONSTRAINT MDIS88_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--SCHEDULE TRACKING
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING ADD SCE_PROJ_REV_ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING DROP CONSTRAINT MDIT17_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING ADD CONSTRAINT MDIT17_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING DROP CONSTRAINT MDIT17_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING ADD CONSTRAINT MDIT17_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING DROP CONSTRAINT MDIT17_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT17_SCHEDULE_TRACKING ADD CONSTRAINT MDIT17_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIT17_I2;
CREATE INDEX MDI.MDIT17_SCHEDULEID ON MDI.MDIT17_SCHEDULE_TRACKING (SCHEDULE_ID);
--Schedule Task
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK DROP CONSTRAINT MDIT22_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK ADD CONSTRAINT MDIT22_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK DROP CONSTRAINT MDIT22_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK ADD CONSTRAINT MDIT22_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK DROP CONSTRAINT MDIT22_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT22_SCHEDULE_TASK ADD CONSTRAINT MDIT22_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;



--ST Relation
ALTER TABLE MDI.MDIT24_ST_RELATION DROP CONSTRAINT MDIT24_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT24_ST_RELATION ADD CONSTRAINT MDIT24_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT24_ST_RELATION DROP CONSTRAINT MDIT24_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT24_ST_RELATION ADD CONSTRAINT MDIT24_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT24_ST_RELATION DROP CONSTRAINT MDIT24_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT24_ST_RELATION ADD CONSTRAINT MDIT24_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--ST Resource
ALTER TABLE MDI.MDIT26_ST_RESOURCE DROP CONSTRAINT MDIT26_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT26_ST_RESOURCE ADD CONSTRAINT MDIT26_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT26_ST_RESOURCE DROP CONSTRAINT MDIT26_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT26_ST_RESOURCE ADD CONSTRAINT MDIT26_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT26_ST_RESOURCE DROP CONSTRAINT MDIT26_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT26_ST_RESOURCE ADD CONSTRAINT MDIT26_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--Proj Task
ALTER TABLE MDI.MDIT03_PROJ_TASK DROP CONSTRAINT MDIT03_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT03_PROJ_TASK ADD CONSTRAINT MDIT03_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT03_PROJ_TASK DROP CONSTRAINT MDIT03_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT03_PROJ_TASK ADD CONSTRAINT MDIT03_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT03_PROJ_TASK DROP CONSTRAINT MDIT03_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT03_PROJ_TASK ADD CONSTRAINT MDIT03_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;



--TASK NOTIFY
ALTER TABLE MDI.MDIT04_TASK_NOTIFY DROP CONSTRAINT MDIT04_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT04_TASK_NOTIFY ADD CONSTRAINT MDIT04_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT04_TASK_NOTIFY DROP CONSTRAINT MDIT04_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT04_TASK_NOTIFY ADD CONSTRAINT MDIT04_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT04_TASK_NOTIFY DROP CONSTRAINT MDIT04_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT04_TASK_NOTIFY ADD CONSTRAINT MDIT04_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--Task Relation
ALTER TABLE MDI.MDIT05_TASK_RELATION DROP CONSTRAINT MDIT05_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT05_TASK_RELATION ADD CONSTRAINT MDIT05_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT05_TASK_RELATION DROP CONSTRAINT MDIT05_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT05_TASK_RELATION ADD CONSTRAINT MDIT05_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT05_TASK_RELATION DROP CONSTRAINT MDIT05_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT05_TASK_RELATION ADD CONSTRAINT MDIT05_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--Task Resource
ALTER TABLE MDI.MDIT07_TASK_RESOURCE DROP CONSTRAINT MDIT07_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT07_TASK_RESOURCE ADD CONSTRAINT MDIT07_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT07_TASK_RESOURCE DROP CONSTRAINT MDIT07_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT07_TASK_RESOURCE ADD CONSTRAINT MDIT07_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT07_TASK_RESOURCE DROP CONSTRAINT MDIT07_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT07_TASK_RESOURCE ADD CONSTRAINT MDIT07_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;


--GATE
CREATE SEQUENCE MDI.MDIT10_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIT10_SEQ TO MDI_R_ADMIN;
CREATE TABLE MDI.MDIT10_GATE(
	GATE_ID NUMBER(9) NOT NULL,
	NAME VARCHAR2(128) NOT NULL,
	DESCRITION VARCHAR2(1024),
	ACTIVE NUMBER(1) DEFAULT 1,
	ALT_DOUBLE1 FLOAT(24),
	ALT_DOUBLE2 FLOAT(24),
	ALT_DOUBLE3 FLOAT(24),
	ALT_VARCHAR1 VARCHAR2(512),
	ALT_VARCHAR2 VARCHAR2(512),
	ALT_VARCHAR3 VARCHAR2(512),
	ALT_DATE1 DATE,
	ALT_DATE2 DATE,
	ALT_DATE3 DATE,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIT10_PK PRIMARY KEY (GATE_ID),
	CONSTRAINT MDIT10_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIT10_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIT10_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
GRANT SELECT ON MDI.MDIT10_GATE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIT10_GATE TO MDI_R_ADMIN;
GRANT UPDATE ON MDI.MDIT10_GATE TO MDI_R_ADMIN;
GRANT DELETE ON MDI.MDIT10_GATE TO MDI_R_ADMIN;
/
CREATE OR REPLACE TRIGGER MDIT10_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIT10_GATE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT10_GATE',
				TO_CHAR(:NEW.GATE_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT10_GATE',
				TO_CHAR(:NEW.GATE_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT10_GATE',
				TO_CHAR(:OLD.GATE_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--GATE TRACKING
CREATE SEQUENCE MDI.MDIT15_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIT15_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIT15_GATE_TRACKING(
	GATE_TRACKING_ID NUMBER(9) NOT NULL,
	SCE_PROJ_REV_ID NUMBER(9) NOT NULL,
	GATE_ID NUMBER(9) NOT NULL,
	EXPECTED_DATE DATE,
	RESOLUTION_TS DATE,
	RESOLUTION NUMBER(2),
	APPROVER_USER_ID NUMBER(9),
	RESOLUTION_NOTE VARCHAR2(1024),
	ALT_DOUBLE1 FLOAT(24),
	ALT_DOUBLE2 FLOAT(24),
	ALT_DOUBLE3 FLOAT(24),
	ALT_VARCHAR1 VARCHAR2(512),
	ALT_VARCHAR2 VARCHAR2(512),
	ALT_VARCHAR3 VARCHAR2(512),
	TASK_ID NUMBER(9),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIT15_PK PRIMARY KEY (GATE_TRACKING_ID),
	CONSTRAINT MDIT15_FK01I FOREIGN KEY (SCE_PROJ_REV_ID) REFERENCES MDI.MDIS40_SCE_PROJ_REV (SCE_PROJ_REV_ID) ON DELETE CASCADE,
	CONSTRAINT MDIT15_FK02I FOREIGN KEY (GATE_ID) REFERENCES MDI.MDIT10_GATE (GATE_ID) ON DELETE CASCADE,
	CONSTRAINT MDIT15_FK06 FOREIGN KEY (APPROVER_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE CASCADE,
	CONSTRAINT MDIT15_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIT15_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIT15_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIT15_GATEID ON MDI.MDIT15_GATE_TRACKING (GATE_ID);
CREATE INDEX MDI.MDIT15_SCEPROJREVID ON MDI.MDIT15_GATE_TRACKING (SCE_PROJ_REV_ID);
GRANT SELECT ON MDI.MDIT15_GATE_TRACKING TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIT15_GATE_TRACKING TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIT15_GATE_TRACKING TO MDI_R_USER;
GRANT DELETE ON MDI.MDIT15_GATE_TRACKING TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIT15_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIT15_GATE_TRACKING
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT15_GATE_TRACKING',
				TO_CHAR(:NEW.GATE_TRACKING_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT15_GATE_TRACKING',
				TO_CHAR(:NEW.GATE_TRACKING_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIT15_GATE_TRACKING',
				TO_CHAR(:OLD.GATE_TRACKING_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCE PROJ DRIVER
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER DROP CONSTRAINT MDIT50_FK_INSERTUSERID;
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER ADD CONSTRAINT MDIT50_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER DROP CONSTRAINT MDIT50_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER ADD CONSTRAINT MDIT50_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER DROP CONSTRAINT MDIT50_FK_DELETEDUSERID;
ALTER TABLE MDI.MDIT50_SCE_PROJ_DRIVER ADD CONSTRAINT MDIT50_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;

--BBANK
ALTER TABLE MDI.MDI108_BBANK ADD CONSTRAINT MDI108_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI108_BBANK ADD CONSTRAINT MDI108_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI108_BBANK ADD CONSTRAINT MDI108_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CRITERIA
ALTER TABLE MDI.MDI025_CRITERIA DROP CONSTRAINT MDI025_FK_INSERTUSERID;
ALTER TABLE MDI.MDI025_CRITERIA ADD CONSTRAINT MDI025_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI025_CRITERIA DROP CONSTRAINT MDI025_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI025_CRITERIA ADD CONSTRAINT MDI025_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI025_CRITERIA DROP CONSTRAINT MDI025_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI025_CRITERIA ADD CONSTRAINT MDI025_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI025_U;

--CKT
ALTER TABLE MDI.MDI220_CKT DROP CONSTRAINT MDI220_FK_INSERTUSERID;
ALTER TABLE MDI.MDI220_CKT ADD CONSTRAINT MDI220_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI220_CKT DROP CONSTRAINT MDI220_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI220_CKT ADD CONSTRAINT MDI220_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI220_CKT DROP CONSTRAINT MDI220_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI220_CKT ADD CONSTRAINT MDI220_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI220_I1;
DROP INDEX MDI220_I2;
DROP INDEX MDI220_U;
CREATE INDEX MDI.MDI220_PLANYEAR_BBANKSUBID ON MDI.MDI220_CKT (PLANYEAR,BBANK_SUB_ID);
CREATE INDEX MDI.MDI220_PLANYEAR_SIMID_PROJID ON MDI.MDI220_CKT (PLANYEAR,SIM_ID,PROJ_ID);
--SIM CKT
ALTER TABLE MDI.MDI225_SIM_CKT DROP CONSTRAINT MDI225_FK_INSERTUSERID;
ALTER TABLE MDI.MDI225_SIM_CKT ADD CONSTRAINT MDI225_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI225_SIM_CKT DROP CONSTRAINT MDI225_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI225_SIM_CKT ADD CONSTRAINT MDI225_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI225_SIM_CKT DROP CONSTRAINT MDI225_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI225_SIM_CKT ADD CONSTRAINT MDI225_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI225_1I;
DROP INDEX MDI225_2I;
CREATE INDEX MDI.MDI225_PLANYEAR_SIMID_INSERVICEPROJID ON MDI.MDI225_SIM_CKT (PLANYEAR,SIM_ID,IN_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI225_PLANYEAR_SIMID_OUTSERVICEPROJID ON MDI.MDI225_SIM_CKT (PLANYEAR,SIM_ID,OUT_SERVICE_PROJ_ID);
--CKT MONTHLY
ALTER TABLE MDI.MDI235_CKT_MONTHLY DROP CONSTRAINT MDI235_FK_INSERTUSERID;
ALTER TABLE MDI.MDI235_CKT_MONTHLY ADD CONSTRAINT MDI235_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI235_CKT_MONTHLY DROP CONSTRAINT MDI235_FK_MODIFIEDUSERID;
ALTER TABLE MDI.MDI235_CKT_MONTHLY ADD CONSTRAINT MDI235_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI235_CKT_MONTHLY DROP CONSTRAINT MDI235_FK_DELETEDUSERID;
ALTER TABLE MDI.MDI235_CKT_MONTHLY ADD CONSTRAINT MDI235_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CKT DAILY
ALTER TABLE MDI.MDI240_CKT_DAILY DROP CONSTRAINT MDI240_FK_INSERTUSERID;
ALTER TABLE MDI.MDI240_CKT_DAILY ADD CONSTRAINT MDI240_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI240_CKT_DAILY ADD CONSTRAINT MDI240_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI240_CKT_DAILY ADD CONSTRAINT MDI240_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI240_I;
--CKT EDNA READ
ALTER TABLE MDI.MDI245_CKT_EDNA_READ MODIFY MIN_TIME DATE;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ MODIFY MAX_TIME DATE;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ DROP CONSTRAINT MDI245_FK04;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ DROP CONSTRAINT MDI245_FK03;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ DROP CONSTRAINT MDI245_FK02;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ ADD CONSTRAINT MDI245_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ ADD CONSTRAINT MDI245_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI245_CKT_EDNA_READ ADD CONSTRAINT MDI245_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--BBANK TIE
ALTER TABLE MDI.MDI170_BBANK_TIE DROP CONSTRAINT MDI170_FK6;
ALTER TABLE MDI.MDI170_BBANK_TIE DROP CONSTRAINT MDI170_FK5;
ALTER TABLE MDI.MDI170_BBANK_TIE DROP CONSTRAINT MDI170_FK4;
ALTER TABLE MDI.MDI170_BBANK_TIE ADD CONSTRAINT MDI170_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI170_BBANK_TIE ADD CONSTRAINT MDI170_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI170_BBANK_TIE ADD CONSTRAINT MDI170_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI170_I1;
DROP INDEX MDI170_I2;
DROP INDEX MDI170_U;
CREATE INDEX MDI.MDI170_PLANYEAR_FROMSUBID ON MDI.MDI170_BBANK_TIE (PLANYEAR,FROM_SUB_ID);
CREATE INDEX MDI.MDI170_PLANYEAR_TOSUBID ON MDI.MDI170_BBANK_TIE (PLANYEAR,TO_SUB_ID);
--BBANK TRANS
ALTER TABLE MDI.MDI180_BBANK_TRANS DROP CONSTRAINT MDI180_FK4;
ALTER TABLE MDI.MDI180_BBANK_TRANS DROP CONSTRAINT MDI180_FK3;
ALTER TABLE MDI.MDI180_BBANK_TRANS DROP CONSTRAINT MDI180_FK2;
ALTER TABLE MDI.MDI180_BBANK_TRANS ADD CONSTRAINT MDI180_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI180_BBANK_TRANS ADD CONSTRAINT MDI180_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI180_BBANK_TRANS ADD CONSTRAINT MDI180_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--BBANK TRANS N1
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 DROP CONSTRAINT MDI200_FK5;
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 DROP CONSTRAINT MDI200_FK4;
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 DROP CONSTRAINT MDI200_FK3;
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 ADD CONSTRAINT MDI200_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 ADD CONSTRAINT MDI200_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI200_BBANK_TRANS_N1 ADD CONSTRAINT MDI200_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI200_PLANYEAR_BBANKSUBID ON MDI.MDI200_BBANK_TRANS_N1 (PLANYEAR,BBANK_SUB_ID);
--CKT SWT
ALTER TABLE MDI.MDI250_CKT_SWT DROP CONSTRAINT MDI250_FK4;
ALTER TABLE MDI.MDI250_CKT_SWT DROP CONSTRAINT MDI250_FK3;
ALTER TABLE MDI.MDI250_CKT_SWT DROP CONSTRAINT MDI250_FK2;
ALTER TABLE MDI.MDI250_CKT_SWT ADD CONSTRAINT MDI250_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI250_CKT_SWT ADD CONSTRAINT MDI250_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI250_CKT_SWT ADD CONSTRAINT MDI250_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI250_U;
CREATE INDEX MDI.MDI250_PLANYEAR ON MDI.MDI250_CKT_SWT (PLANYEAR);
--CKT CONT
ALTER TABLE MDI.MDI270_CKT_CONT DROP CONSTRAINT MDI270_FK4;
ALTER TABLE MDI.MDI270_CKT_CONT DROP CONSTRAINT MDI270_FK3;
ALTER TABLE MDI.MDI270_CKT_CONT DROP CONSTRAINT MDI270_FK2;
ALTER TABLE MDI.MDI270_CKT_CONT ADD CONSTRAINT MDI270_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI270_CKT_CONT ADD CONSTRAINT MDI270_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI270_CKT_CONT ADD CONSTRAINT MDI270_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI270_PLANYEAR_CKTID ON MDI.MDI270_CKT_CONT (PLANYEAR,CKT_ID);
--CONT
ALTER TABLE MDI.MDI275_CONT DROP CONSTRAINT MDI275_FK4;
ALTER TABLE MDI.MDI275_CONT DROP CONSTRAINT MDI275_FK3;
ALTER TABLE MDI.MDI275_CONT DROP CONSTRAINT MDI275_FK2;
ALTER TABLE MDI.MDI275_CONT ADD CONSTRAINT MDI275_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI275_CONT ADD CONSTRAINT MDI275_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI275_CONT ADD CONSTRAINT MDI275_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI275_PLANYEAR ON MDI.MDI275_CONT (PLANYEAR);
--SUB CONT
ALTER TABLE MDI.MDI320_SUB_CONT DROP CONSTRAINT MDI320_FK4;
ALTER TABLE MDI.MDI320_SUB_CONT DROP CONSTRAINT MDI320_FK3;
ALTER TABLE MDI.MDI320_SUB_CONT DROP CONSTRAINT MDI320_FK2;
ALTER TABLE MDI.MDI320_SUB_CONT ADD CONSTRAINT MDI320_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI320_SUB_CONT ADD CONSTRAINT MDI320_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI320_SUB_CONT ADD CONSTRAINT MDI320_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI320_PLANYEAR_SUBID ON MDI.MDI320_SUB_CONT (PLANYEAR,SUB_ID);
--SUB CONT TRANS
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS DROP CONSTRAINT MDI340_FK9;
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS DROP CONSTRAINT MDI340_FK8;
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS DROP CONSTRAINT MDI340_FK7;
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS ADD CONSTRAINT MDI340_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS ADD CONSTRAINT MDI340_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI340_SUB_CONT_TRANS ADD CONSTRAINT MDI340_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI340_I;
CREATE INDEX MDI.MDI340_PLANYEAR_SUBID ON MDI.MDI340_SUB_CONT_TRANS (PLANYEAR,SUB_ID);
--SUB CONT SHED
ALTER TABLE MDI.MDI330_SUB_CONT_SHED DROP CONSTRAINT MDI330_FK5;
ALTER TABLE MDI.MDI330_SUB_CONT_SHED DROP CONSTRAINT MDI330_FK7;
ALTER TABLE MDI.MDI330_SUB_CONT_SHED DROP CONSTRAINT MDI330_FK6;
ALTER TABLE MDI.MDI330_SUB_CONT_SHED ADD CONSTRAINT MDI330_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI330_SUB_CONT_SHED ADD CONSTRAINT MDI330_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI330_SUB_CONT_SHED ADD CONSTRAINT MDI330_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI330_I;
CREATE INDEX MDI.MDI330_PLANYEAR_SUBID ON MDI.MDI330_SUB_CONT_SHED (PLANYEAR,SUB_ID);
--CKT CONT TRANS
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS DROP CONSTRAINT MDI290_FK9;
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS DROP CONSTRAINT MDI290_FK8;
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS DROP CONSTRAINT MDI290_FK7;
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS ADD CONSTRAINT MDI290_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS ADD CONSTRAINT MDI290_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI290_CKT_CONT_TRANS ADD CONSTRAINT MDI290_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI290_I;
CREATE INDEX MDI.MDI290_PLANYEAR_CKTID ON MDI.MDI290_CKT_CONT_TRANS (PLANYEAR,CKT_ID);
--CKT CONT SHED
ALTER TABLE MDI.MDI280_CKT_CONT_SHED DROP CONSTRAINT MDI280_FK6;
ALTER TABLE MDI.MDI280_CKT_CONT_SHED DROP CONSTRAINT MDI280_FK5;
ALTER TABLE MDI.MDI280_CKT_CONT_SHED DROP CONSTRAINT MDI280_FK4;
ALTER TABLE MDI.MDI280_CKT_CONT_SHED ADD CONSTRAINT MDI280_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI280_CKT_CONT_SHED ADD CONSTRAINT MDI280_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI280_CKT_CONT_SHED ADD CONSTRAINT MDI280_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI280_I;
CREATE INDEX MDI.MDI280_PLANYEAR_CKTID ON MDI.MDI280_CKT_CONT_SHED (PLANYEAR,CKT_ID);
--CKT TRANS N1
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 DROP CONSTRAINT MDI265_FK8;
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 DROP CONSTRAINT MDI265_FK7;
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 DROP CONSTRAINT MDI265_FK6;
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 ADD CONSTRAINT MDI265_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 ADD CONSTRAINT MDI265_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI265_CKT_TRANS_N1 ADD CONSTRAINT MDI265_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI265_I1;
CREATE INDEX MDI.MDI265_PLANYEAR_BBANKSUBID_TIEID_YEAR ON MDI.MDI265_CKT_TRANS_N1 (PLANYEAR,BBANK_SUB_ID,TIE_ID,YEAR);
--SWT PROC
ALTER TABLE MDI.MDI255_SWT_PROC DROP CONSTRAINT MDI180_FK2I;
ALTER TABLE MDI.MDI255_SWT_PROC DROP CONSTRAINT MDI255_FK5;
ALTER TABLE MDI.MDI255_SWT_PROC DROP CONSTRAINT MDI255_FK4;
ALTER TABLE MDI.MDI255_SWT_PROC DROP CONSTRAINT MDI255_FK3;
ALTER TABLE MDI.MDI255_SWT_PROC DROP CONSTRAINT MDI180_FK1I;
ALTER TABLE MDI.MDI255_SWT_PROC ADD CONSTRAINT MDI255_FK1I FOREIGN KEY (PLANYEAR,BBANK_SUB_ID) REFERENCES MDI.MDI108_BBANK (PLANYEAR,BBANK_SUB_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI255_SWT_PROC ADD CONSTRAINT MDI255_FK2I FOREIGN KEY (PLANYEAR,SIM_ID,TIE_ID) REFERENCES MDI.MDI170_BBANK_TIE (PLANYEAR,SIM_ID,TIE_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI255_SWT_PROC ADD CONSTRAINT MDI255_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI255_SWT_PROC ADD CONSTRAINT MDI255_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI255_SWT_PROC ADD CONSTRAINT MDI255_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI255_I;
DROP INDEX MDI255_I2;
CREATE INDEX MDI.MDI255_PLANYEAR_BBANKSUBID ON MDI.MDI255_SWT_PROC (PLANYEAR,BBANK_SUB_ID);
CREATE INDEX MDI.MDI255_PLANYEAR_SIMID_TIEID ON MDI.MDI255_SWT_PROC (PLANYEAR,SIM_ID,TIE_ID);
--CKT TRANS
ALTER TABLE MDI.MDI260_CKT_TRANS DROP CONSTRAINT MDI260_FK8;
ALTER TABLE MDI.MDI260_CKT_TRANS DROP CONSTRAINT MDI260_FK7;
ALTER TABLE MDI.MDI260_CKT_TRANS DROP CONSTRAINT MDI260_FK6;
ALTER TABLE MDI.MDI260_CKT_TRANS ADD CONSTRAINT MDI260_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI260_CKT_TRANS ADD CONSTRAINT MDI260_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI260_CKT_TRANS ADD CONSTRAINT MDI260_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI260_I1;
DROP INDEX MDI260_I2;
DROP INDEX MDI260_I3;
CREATE INDEX MDI.MDI260_PLANYEAR_FROMCKTID ON MDI.MDI260_CKT_TRANS (PLANYEAR,FROM_CKT_ID);
CREATE INDEX MDI.MDI260_PLANYEAR_PROCID ON MDI.MDI260_CKT_TRANS (PLANYEAR,PROC_ID);
CREATE INDEX MDI.MDI260_PLANYEAR_TOCKTID ON MDI.MDI260_CKT_TRANS (PLANYEAR,TO_CKT_ID);
--GROWTH TYPE
ALTER TABLE MDI.MDI350_GROWTH_TYPE DROP CONSTRAINT MDI350_FK04;
ALTER TABLE MDI.MDI350_GROWTH_TYPE DROP CONSTRAINT MDI350_FK03;
ALTER TABLE MDI.MDI350_GROWTH_TYPE DROP CONSTRAINT MDI350_FK02;
ALTER TABLE MDI.MDI350_GROWTH_TYPE ADD CONSTRAINT MDI350_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI350_GROWTH_TYPE ADD CONSTRAINT MDI350_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI350_GROWTH_TYPE ADD CONSTRAINT MDI350_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SYS GROWTH
ALTER TABLE MDI.MDI213_SYS_GROWTH DROP CONSTRAINT MDI213_FK6;
ALTER TABLE MDI.MDI213_SYS_GROWTH DROP CONSTRAINT MDI213_FK5;
ALTER TABLE MDI.MDI213_SYS_GROWTH DROP CONSTRAINT MDI213_FK4;
ALTER TABLE MDI.MDI213_SYS_GROWTH ADD CONSTRAINT MDI213_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI213_SYS_GROWTH ADD CONSTRAINT MDI213_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI213_SYS_GROWTH ADD CONSTRAINT MDI213_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CKT GROWTH
ALTER TABLE MDI.MDI355_CKT_GROWTH DROP CONSTRAINT MDI355_FK06;
ALTER TABLE MDI.MDI355_CKT_GROWTH DROP CONSTRAINT MDI355_FK05;
ALTER TABLE MDI.MDI355_CKT_GROWTH DROP CONSTRAINT MDI355_FK04;
ALTER TABLE MDI.MDI355_CKT_GROWTH ADD CONSTRAINT MDI355_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI355_CKT_GROWTH ADD CONSTRAINT MDI355_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI355_CKT_GROWTH ADD CONSTRAINT MDI355_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI355_PLANYEAR_CKTID ON MDI.MDI355_CKT_GROWTH (PLANYEAR,CKT_ID);
CREATE INDEX MDI.MDI355_PLANYEAR_GROWTHTYPEID ON MDI.MDI355_CKT_GROWTH (PLANYEAR,GROWTH_TYPE_ID);
--PIF BI
ALTER TABLE MDI.MDI620_PIF_BI DROP CONSTRAINT MDI620_FK3;
ALTER TABLE MDI.MDI620_PIF_BI DROP CONSTRAINT MDI620_FK2;
ALTER TABLE MDI.MDI620_PIF_BI DROP CONSTRAINT MDI620_FK4;
ALTER TABLE MDI.MDI620_PIF_BI ADD CONSTRAINT MDI620_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI620_PIF_BI ADD CONSTRAINT MDI620_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI620_PIF_BI ADD CONSTRAINT MDI620_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI620_U;
CREATE INDEX MDI.MDI620_PLANYEAR ON MDI.MDI620_PIF_BI (PLANYEAR);
--PIF CATEGORY
ALTER TABLE MDI.MDI650_PIF_CATEGORY DROP CONSTRAINT MDI650_FK2;
ALTER TABLE MDI.MDI650_PIF_CATEGORY DROP CONSTRAINT MDI650_FK4;
ALTER TABLE MDI.MDI650_PIF_CATEGORY DROP CONSTRAINT MDI650_FK3;
ALTER TABLE MDI.MDI650_PIF_CATEGORY ADD CONSTRAINT MDI650_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI650_PIF_CATEGORY ADD CONSTRAINT MDI650_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI650_PIF_CATEGORY ADD CONSTRAINT MDI650_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI650_U;
CREATE INDEX MDI.MDI650_PLANYEAR ON MDI.MDI650_PIF_CATEGORY (PLANYEAR);
--PIF PRIORITY
ALTER TABLE MDI.MDI630_PIF_PRIORITY DROP CONSTRAINT MDI630_FK2;
ALTER TABLE MDI.MDI630_PIF_PRIORITY DROP CONSTRAINT MDI630_FK4;
ALTER TABLE MDI.MDI630_PIF_PRIORITY DROP CONSTRAINT MDI630_FK3;
ALTER TABLE MDI.MDI630_PIF_PRIORITY ADD CONSTRAINT MDI630_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI630_PIF_PRIORITY ADD CONSTRAINT MDI630_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI630_PIF_PRIORITY ADD CONSTRAINT MDI630_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI630_U;
CREATE INDEX MDI.MDI630_PLANYEAR ON MDI.MDI630_PIF_PRIORITY (PLANYEAR);
--PIF LABOR
ALTER TABLE MDI.MDI640_PIF_LABOR DROP CONSTRAINT MDI640_FK4;
ALTER TABLE MDI.MDI640_PIF_LABOR DROP CONSTRAINT MDI640_FK3;
ALTER TABLE MDI.MDI640_PIF_LABOR DROP CONSTRAINT MDI640_FK2;
ALTER TABLE MDI.MDI640_PIF_LABOR ADD CONSTRAINT MDI640_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI640_PIF_LABOR ADD CONSTRAINT MDI640_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI640_PIF_LABOR ADD CONSTRAINT MDI640_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI640_U;
CREATE INDEX MDI.MDI640_PLANYEAR ON MDI.MDI640_PIF_LABOR (PLANYEAR);
--PIF STATUS
ALTER TABLE MDI.MDI645_PIF_STATUS DROP CONSTRAINT MDI645_FK4;
ALTER TABLE MDI.MDI645_PIF_STATUS DROP CONSTRAINT MDI645_FK3;
ALTER TABLE MDI.MDI645_PIF_STATUS DROP CONSTRAINT MDI645_FK2;
ALTER TABLE MDI.MDI645_PIF_STATUS ADD CONSTRAINT MDI645_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI645_PIF_STATUS ADD CONSTRAINT MDI645_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI645_PIF_STATUS ADD CONSTRAINT MDI645_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI645_PIF_STATUS;
DROP INDEX MDI645_U;
CREATE INDEX MDI.MDI645_PLANYEAR ON MDI.MDI645_PIF_STATUS (PLANYEAR);
--PIF
ALTER TABLE MDI.MDI670_PIF DROP COLUMN REQUEST_NUM;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN OTHER_CUST_TYPE;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN OTHER_BI;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN OTHER_PROJ_DRIVER;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN OTHER_MAJOR_CUST_TYPE;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_BUDGET_CAT_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_COMP_RISK_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_CREW_TYPE_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_FINANCE_CONFIRM_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_PROJ_DRIVER_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_CUST_TYPE_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_MAJOR_CUST_TYPE_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN PIF_GW_CAT_ID;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN DISTRICT_SPONSOR;
ALTER TABLE MDI.MDI670_PIF DROP COLUMN OTHER_GW;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK19;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK18;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK17;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK16;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK13;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK12;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK11;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK22;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK21;
ALTER TABLE MDI.MDI670_PIF DROP CONSTRAINT MDI670_FK20;
ALTER TABLE MDI.MDI670_PIF ADD CONSTRAINT MDI670_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI670_PIF ADD CONSTRAINT MDI670_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI670_PIF ADD CONSTRAINT MDI670_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI670_I1;
DROP INDEX MDI670_I2;
DROP INDEX MDI670_U1;
CREATE INDEX MDI.MDI670_PLANYEAR_BBANKSUBID ON MDI.MDI670_PIF (PLANYEAR,BBANK_SUB_ID);
CREATE INDEX MDI.MDI670_PLANYEAR_CKTID ON MDI.MDI670_PIF (PLANYEAR,CKT_ID);
--PIF SUB JUST
ALTER TABLE MDI.MDI675_PIF_SUB_JUST DROP CONSTRAINT MDI675_FK5;
ALTER TABLE MDI.MDI675_PIF_SUB_JUST DROP CONSTRAINT MDI675_FK4;
ALTER TABLE MDI.MDI675_PIF_SUB_JUST DROP CONSTRAINT MDI675_FK3;
ALTER TABLE MDI.MDI675_PIF_SUB_JUST ADD CONSTRAINT MDI675_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI675_PIF_SUB_JUST ADD CONSTRAINT MDI675_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI675_PIF_SUB_JUST ADD CONSTRAINT MDI675_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI675_PLANYEAR_PIFID ON MDI.MDI675_PIF_SUB_JUST (PLANYEAR,PIF_ID);
--PIF BUDGET CAT
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT DROP CONSTRAINT MDI665_FK04;
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT DROP CONSTRAINT MDI665_FK03;
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT DROP CONSTRAINT MDI665_FK02;
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT ADD CONSTRAINT MDI665_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT ADD CONSTRAINT MDI665_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI665_PIF_BUDGET_CAT ADD CONSTRAINT MDI665_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI665_U1;
--PIF COMP RISK
ALTER TABLE MDI.MDI673_PIF_COMP_RISK DROP CONSTRAINT MDI673_FK03;
ALTER TABLE MDI.MDI673_PIF_COMP_RISK DROP CONSTRAINT MDI673_FK02;
ALTER TABLE MDI.MDI673_PIF_COMP_RISK DROP CONSTRAINT MDI673_FK04;
ALTER TABLE MDI.MDI673_PIF_COMP_RISK ADD CONSTRAINT MDI673_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI673_PIF_COMP_RISK ADD CONSTRAINT MDI673_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI673_PIF_COMP_RISK ADD CONSTRAINT MDI673_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI673_U1;
--PIF CREW TYPE
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE DROP CONSTRAINT MDI674_FK02;
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE DROP CONSTRAINT MDI674_FK04;
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE DROP CONSTRAINT MDI674_FK03;
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE ADD CONSTRAINT MDI674_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE ADD CONSTRAINT MDI674_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI674_PIF_CREW_TYPE ADD CONSTRAINT MDI674_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI674_U1;
--PIF PROJ DRIVER
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER DROP CONSTRAINT MDI671_FK04;
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER DROP CONSTRAINT MDI671_FK03;
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER DROP CONSTRAINT MDI671_FK02;
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER ADD CONSTRAINT MDI671_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER ADD CONSTRAINT MDI671_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI671_PIF_PROJ_DRIVER ADD CONSTRAINT MDI671_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI671_U1;
--PIF CUST TYPE
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE DROP CONSTRAINT MDI672_FK04;
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE DROP CONSTRAINT MDI672_FK03;
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE DROP CONSTRAINT MDI672_FK02;
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE ADD CONSTRAINT MDI672_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE ADD CONSTRAINT MDI672_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI672_PIF_CUST_TYPE ADD CONSTRAINT MDI672_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI672_U1;
--PIF MAJOR CUST TYPE
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE DROP CONSTRAINT MDI679_FK04;
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE DROP CONSTRAINT MDI679_FK03;
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE DROP CONSTRAINT MDI679_FK02;
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE ADD CONSTRAINT MDI679_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE ADD CONSTRAINT MDI679_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI679_PIF_MAJOR_CUST_TYPE ADD CONSTRAINT MDI679_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI679_U1;
--PIF GW CAT
ALTER TABLE MDI.MDI667_PIF_GW_CAT DROP CONSTRAINT MDI667_FK04;
ALTER TABLE MDI.MDI667_PIF_GW_CAT DROP CONSTRAINT MDI667_FK03;
ALTER TABLE MDI.MDI667_PIF_GW_CAT DROP CONSTRAINT MDI667_FK02;
ALTER TABLE MDI.MDI667_PIF_GW_CAT ADD CONSTRAINT MDI667_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI667_PIF_GW_CAT ADD CONSTRAINT MDI667_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI667_PIF_GW_CAT ADD CONSTRAINT MDI667_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI667_U1;
--PIF WO
ALTER TABLE MDI.MDI680_PIF_WO DROP CONSTRAINT MDI680_FK5;
ALTER TABLE MDI.MDI680_PIF_WO DROP CONSTRAINT MDI680_FK4;
ALTER TABLE MDI.MDI680_PIF_WO DROP CONSTRAINT MDI680_FK3;
ALTER TABLE MDI.MDI680_PIF_WO ADD CONSTRAINT MDI680_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI680_PIF_WO ADD CONSTRAINT MDI680_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI680_PIF_WO ADD CONSTRAINT MDI680_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI680_PLANYEAR_DISTRICTID ON MDI.MDI680_PIF_WO (PLANYEAR,DISTRICT_ID);
CREATE INDEX MDI.MDI680_PLANYEAR_PIFID ON MDI.MDI680_PIF_WO (PLANYEAR,PIF_ID);
--PIF IMPACT TYPE
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE DROP CONSTRAINT MDI677_FK04;
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE DROP CONSTRAINT MDI677_FK03;
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE DROP CONSTRAINT MDI677_FK02;
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE ADD CONSTRAINT MDI677_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE ADD CONSTRAINT MDI677_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI677_PIF_IMPACT_TYPE ADD CONSTRAINT MDI677_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI677_U1;
--PIF IMPACT VALUE
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE DROP CONSTRAINT MDI678_FK04;
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE DROP CONSTRAINT MDI678_FK03;
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE DROP CONSTRAINT MDI678_FK02;
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE ADD CONSTRAINT MDI678_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE ADD CONSTRAINT MDI678_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI678_PIF_IMPACT_VALUE ADD CONSTRAINT MDI678_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI678_U1;
--PIF WO IMPACT
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT DROP CONSTRAINT MDI666_FK4;
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT DROP CONSTRAINT MDI666_FK6;
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT DROP CONSTRAINT MDI666_FK5;
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT ADD CONSTRAINT MDI666_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT ADD CONSTRAINT MDI666_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI666_PIF_WO_IMPACT ADD CONSTRAINT MDI666_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI666_PLANYEAR_WOID ON MDI.MDI666_PIF_WO_IMPACT (PLANYEAR,WO_ID);
--PIF CKT JUST
ALTER TABLE MDI.MDI685_PIF_CKT_JUST DROP CONSTRAINT MDI685_FK5;
ALTER TABLE MDI.MDI685_PIF_CKT_JUST DROP CONSTRAINT MDI685_FK4;
ALTER TABLE MDI.MDI685_PIF_CKT_JUST DROP CONSTRAINT MDI685_FK3;
ALTER TABLE MDI.MDI685_PIF_CKT_JUST ADD CONSTRAINT MDI685_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI685_PIF_CKT_JUST ADD CONSTRAINT MDI685_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI685_PIF_CKT_JUST ADD CONSTRAINT MDI685_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI685_PLANYEAR_PIFID ON MDI.MDI685_PIF_CKT_JUST (PLANYEAR,PIF_ID);
--PIF EST
ALTER TABLE MDI.MDI690_PIF_EST DROP CONSTRAINT MDI690_FK4;
ALTER TABLE MDI.MDI690_PIF_EST DROP CONSTRAINT MDI690_FK3;
ALTER TABLE MDI.MDI690_PIF_EST DROP CONSTRAINT MDI690_FK2;
ALTER TABLE MDI.MDI690_PIF_EST ADD CONSTRAINT MDI690_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI690_PIF_EST ADD CONSTRAINT MDI690_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI690_PIF_EST ADD CONSTRAINT MDI690_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PIF LINE JUST
ALTER TABLE MDI.MDI693_PIF_LINE_JUST DROP CONSTRAINT MDI693_FK4;
ALTER TABLE MDI.MDI693_PIF_LINE_JUST DROP CONSTRAINT MDI693_FK3;
ALTER TABLE MDI.MDI693_PIF_LINE_JUST DROP CONSTRAINT MDI693_FK2;
ALTER TABLE MDI.MDI693_PIF_LINE_JUST ADD CONSTRAINT MDI693_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI693_PIF_LINE_JUST ADD CONSTRAINT MDI693_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI693_PIF_LINE_JUST ADD CONSTRAINT MDI693_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI693_PLANYEAR_PIFID ON MDI.MDI693_PIF_LINE_JUST (PLANYEAR,PIF_ID);
--PIF VOLT JUST
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST DROP CONSTRAINT MDI697_FK4;
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST DROP CONSTRAINT MDI697_FK3;
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST DROP CONSTRAINT MDI697_FK2;
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST ADD CONSTRAINT MDI697_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST ADD CONSTRAINT MDI697_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI697_PIF_VOLT_JUST ADD CONSTRAINT MDI697_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI697_PLANYEAR_PIFID ON MDI.MDI697_PIF_VOLT_JUST (PLANYEAR,PIF_ID);
--PIF BUDGET
ALTER TABLE MDI.MDI660_PIF_BUDGET DROP CONSTRAINT MDI660_FK5;
ALTER TABLE MDI.MDI660_PIF_BUDGET DROP CONSTRAINT MDI660_FK4;
ALTER TABLE MDI.MDI660_PIF_BUDGET DROP CONSTRAINT MDI660_FK3;
ALTER TABLE MDI.MDI660_PIF_BUDGET ADD CONSTRAINT MDI660_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI660_PIF_BUDGET ADD CONSTRAINT MDI660_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI660_PIF_BUDGET ADD CONSTRAINT MDI660_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CKT VAR
ALTER TABLE MDI.MDI470_CKT_VAR DROP CONSTRAINT MDI470_FK5;
ALTER TABLE MDI.MDI470_CKT_VAR DROP CONSTRAINT MDI470_FK4;
ALTER TABLE MDI.MDI470_CKT_VAR DROP CONSTRAINT MDI470_FK3;
ALTER TABLE MDI.MDI470_CKT_VAR ADD CONSTRAINT MDI470_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI470_CKT_VAR ADD CONSTRAINT MDI470_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI470_CKT_VAR ADD CONSTRAINT MDI470_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI470_I;
DROP INDEX MDI470_U;
CREATE INDEX MDI.MDI470_PLANYEAR_CKTID ON MDI.MDI470_CKT_VAR (PLANYEAR,CKT_ID);
--DUCT BANK
ALTER TABLE MDI.MDI700_DUCT_BANK DROP CONSTRAINT MDI700_FK4;
ALTER TABLE MDI.MDI700_DUCT_BANK DROP CONSTRAINT MDI700_FK3;
ALTER TABLE MDI.MDI700_DUCT_BANK DROP CONSTRAINT MDI700_FK2;
ALTER TABLE MDI.MDI700_DUCT_BANK ADD CONSTRAINT MDI700_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI700_DUCT_BANK ADD CONSTRAINT MDI700_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI700_DUCT_BANK ADD CONSTRAINT MDI700_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI700_I;
CREATE INDEX MDI.MDI700_PLANYEAR_BBANKSUBID ON MDI.MDI700_DUCT_BANK (PLANYEAR,BBANK_SUB_ID);
--DUCT BANK FILE
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE DROP CONSTRAINT MDI705_FK4;
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE DROP CONSTRAINT MDI705_FK3;
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE DROP CONSTRAINT MDI705_FK2;
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE ADD CONSTRAINT MDI705_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE ADD CONSTRAINT MDI705_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI705_DUCT_BANK_FILE ADD CONSTRAINT MDI705_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI705_I;
CREATE INDEX MDI.MDI705_PLANYEAR_DBID ON MDI.MDI705_DUCT_BANK_FILE (PLANYEAR,DB_ID);
--CABLE
ALTER TABLE MDI.MDI710_CABLE DROP CONSTRAINT MDI710_FK4;
ALTER TABLE MDI.MDI710_CABLE DROP CONSTRAINT MDI710_FK3;
ALTER TABLE MDI.MDI710_CABLE DROP CONSTRAINT MDI710_FK2;
ALTER TABLE MDI.MDI710_CABLE ADD CONSTRAINT MDI710_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI710_CABLE ADD CONSTRAINT MDI710_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI710_CABLE ADD CONSTRAINT MDI710_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI710_U;
CREATE INDEX MDI.MDI710_PLANYEAR ON MDI.MDI710_CABLE (PLANYEAR);
--DUCT
ALTER TABLE MDI.MDI720_DUCT DROP CONSTRAINT MDI720_FK6;
ALTER TABLE MDI.MDI720_DUCT DROP CONSTRAINT MDI720_FK5;
ALTER TABLE MDI.MDI720_DUCT DROP CONSTRAINT MDI720_FK4;
ALTER TABLE MDI.MDI720_DUCT ADD CONSTRAINT MDI720_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI720_DUCT ADD CONSTRAINT MDI720_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI720_DUCT ADD CONSTRAINT MDI720_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI720_I;
CREATE INDEX MDI.MDI720_PLANYEAR_CKTID ON MDI.MDI720_DUCT (PLANYEAR,CKT_ID);
CREATE INDEX MDI.MDI720_PLANYEAR_DBID ON MDI.MDI720_DUCT (PLANYEAR,DB_ID);
--CUST
ALTER TABLE MDI.MDI920_CUST DROP CONSTRAINT MDI920_FK6;
ALTER TABLE MDI.MDI920_CUST DROP CONSTRAINT MDI920_FK5;
ALTER TABLE MDI.MDI920_CUST DROP CONSTRAINT MDI920_FK4;
ALTER TABLE MDI.MDI920_CUST ADD CONSTRAINT MDI920_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI920_CUST ADD CONSTRAINT MDI920_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI920_CUST ADD CONSTRAINT MDI920_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI920_I1;
DROP INDEX MDI920_I2;
CREATE INDEX MDI.MDI920_PLANYEAR_BBANKSUBID ON MDI.MDI920_CUST (PLANYEAR,BBANK_SUB_ID);
CREATE INDEX MDI.MDI920_PLANYEAR_CKTID ON MDI.MDI920_CUST (PLANYEAR,CKT_ID);
--CKT YEAR
ALTER TABLE MDI.MDI230_CKT_YEAR DROP CONSTRAINT MDI230_FK3;
ALTER TABLE MDI.MDI230_CKT_YEAR DROP CONSTRAINT MDI230_FK5;
ALTER TABLE MDI.MDI230_CKT_YEAR DROP CONSTRAINT MDI230_FK4;
ALTER TABLE MDI.MDI230_CKT_YEAR ADD CONSTRAINT MDI230_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI230_CKT_YEAR ADD CONSTRAINT MDI230_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI230_CKT_YEAR ADD CONSTRAINT MDI230_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--WEATHERSTATION
ALTER TABLE MDI.MDI580_WEATHERSTATION DROP CONSTRAINT MDI580_FK4;
ALTER TABLE MDI.MDI580_WEATHERSTATION DROP CONSTRAINT MDI580_FK3;
ALTER TABLE MDI.MDI580_WEATHERSTATION DROP CONSTRAINT MDI580_FK2;
ALTER TABLE MDI.MDI580_WEATHERSTATION ADD CONSTRAINT MDI580_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI580_WEATHERSTATION ADD CONSTRAINT MDI580_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI580_WEATHERSTATION ADD CONSTRAINT MDI580_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI580_U;
CREATE INDEX MDI.MDI580_PLANYEAR ON MDI.MDI580_WEATHERSTATION (PLANYEAR);
--SUB WEATHER
ALTER TABLE MDI.MDI590_SUB_WEATHER DROP CONSTRAINT MDI590_FK5;
ALTER TABLE MDI.MDI590_SUB_WEATHER DROP CONSTRAINT MDI590_FK4;
ALTER TABLE MDI.MDI590_SUB_WEATHER DROP CONSTRAINT MDI590_FK3;
ALTER TABLE MDI.MDI590_SUB_WEATHER ADD CONSTRAINT MDI590_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI590_SUB_WEATHER ADD CONSTRAINT MDI590_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI590_SUB_WEATHER ADD CONSTRAINT MDI590_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI590_PLANYEAR_BBANKSUBID ON MDI.MDI590_SUB_WEATHER (PLANYEAR,BBANK_SUB_ID);
--TEMPERATURE
ALTER TABLE MDI.MDI600_TEMPERATURE DROP COLUMN AVG_TEMP;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP COLUMN REL_HUMID;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP COLUMN PRECIP;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP COLUMN AVG_WIND;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP CONSTRAINT MDI600_FK4;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP CONSTRAINT MDI600_FK3;
ALTER TABLE MDI.MDI600_TEMPERATURE DROP CONSTRAINT MDI600_FK2;
ALTER TABLE MDI.MDI600_TEMPERATURE ADD CONSTRAINT MDI600_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI600_TEMPERATURE ADD CONSTRAINT MDI600_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI600_TEMPERATURE ADD CONSTRAINT MDI600_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--CRITERIA WS
ALTER TABLE MDI.MDI610_CRITERIA_WS DROP CONSTRAINT MDI610_FK4;
ALTER TABLE MDI.MDI610_CRITERIA_WS DROP CONSTRAINT MDI610_FK3;
ALTER TABLE MDI.MDI610_CRITERIA_WS DROP CONSTRAINT MDI610_FK5;
ALTER TABLE MDI.MDI610_CRITERIA_WS ADD CONSTRAINT MDI610_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI610_CRITERIA_WS ADD CONSTRAINT MDI610_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI610_CRITERIA_WS ADD CONSTRAINT MDI610_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI610_PLANYEAR_STATIONID ON MDI.MDI610_CRITERIA_WS (PLANYEAR,STATION_ID);
--BBANK YEAR
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP COLUMN AREA_RESERVE;
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP COLUMN AREA_SEC_RESERVE;
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP COLUMN LAST_CALC_RESERVES;
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP CONSTRAINT MDI130_FK6;
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP CONSTRAINT MDI130_FK5;
ALTER TABLE MDI.MDI130_BBANK_YEAR DROP CONSTRAINT MDI130_FK4;
ALTER TABLE MDI.MDI130_BBANK_YEAR ADD CONSTRAINT MDI130_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI130_BBANK_YEAR ADD CONSTRAINT MDI130_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI130_BBANK_YEAR ADD CONSTRAINT MDI130_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI130_I;
--ABANK N1 TIE
ALTER TABLE MDI.MDI375_ABANK_N1_TIE DROP CONSTRAINT MDI375_FK5;
ALTER TABLE MDI.MDI375_ABANK_N1_TIE DROP CONSTRAINT MDI375_FK4;
ALTER TABLE MDI.MDI375_ABANK_N1_TIE DROP CONSTRAINT MDI375_FK3;
ALTER TABLE MDI.MDI375_ABANK_N1_TIE ADD CONSTRAINT MDI375_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI375_ABANK_N1_TIE ADD CONSTRAINT MDI375_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI375_ABANK_N1_TIE ADD CONSTRAINT MDI375_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI375_I1;
DROP INDEX MDI375_I2;
DROP INDEX MDI375_U;
CREATE INDEX MDI.MDI375_PLANYEAR_SYSID ON MDI.MDI375_ABANK_N1_TIE (PLANYEAR,SYS_ID);
--STL
ALTER TABLE MDI.MDI370_STL DROP CONSTRAINT MDI370_FK4;
ALTER TABLE MDI.MDI370_STL DROP CONSTRAINT MDI370_FK3;
ALTER TABLE MDI.MDI370_STL DROP CONSTRAINT MDI370_FK2;
ALTER TABLE MDI.MDI370_STL ADD CONSTRAINT MDI370_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI370_STL ADD CONSTRAINT MDI370_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI370_STL ADD CONSTRAINT MDI370_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI370_I;
DROP INDEX MDI370_U;
CREATE INDEX MDI.MDI370_PLANYEAR_ABANKSUBID ON MDI.MDI370_STL (PLANYEAR,ABANK_SUB_ID);
--ABANK TRANS
ALTER TABLE MDI.MDI380_ABANK_TRANS DROP CONSTRAINT MDI380_FK6;
ALTER TABLE MDI.MDI380_ABANK_TRANS DROP CONSTRAINT MDI380_FK5;
ALTER TABLE MDI.MDI380_ABANK_TRANS DROP CONSTRAINT MDI380_FK4;
ALTER TABLE MDI.MDI380_ABANK_TRANS ADD CONSTRAINT MDI380_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI380_ABANK_TRANS ADD CONSTRAINT MDI380_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI380_ABANK_TRANS ADD CONSTRAINT MDI380_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI380_PLANYEAR_TIEID ON MDI.MDI380_ABANK_TRANS (PLANYEAR,TIE_ID);
--ABANK SHED
ALTER TABLE MDI.MDI390_ABANK_SHED DROP CONSTRAINT MDI390_FK5;
ALTER TABLE MDI.MDI390_ABANK_SHED DROP CONSTRAINT MDI390_FK4;
ALTER TABLE MDI.MDI390_ABANK_SHED DROP CONSTRAINT MDI390_FK3;
ALTER TABLE MDI.MDI390_ABANK_SHED ADD CONSTRAINT MDI390_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI390_ABANK_SHED ADD CONSTRAINT MDI390_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI390_ABANK_SHED ADD CONSTRAINT MDI390_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI390_PLANYEAR_SYSID ON MDI.MDI390_ABANK_SHED (PLANYEAR,SYS_ID);
--LG PROJ
ALTER TABLE MDI.MDI900_LG_PROJ DROP CONSTRAINT MDI900_FK7;
ALTER TABLE MDI.MDI900_LG_PROJ DROP CONSTRAINT MDI900_FK6;
ALTER TABLE MDI.MDI900_LG_PROJ DROP CONSTRAINT MDI900_FK5;
ALTER TABLE MDI.MDI900_LG_PROJ ADD CONSTRAINT MDI900_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI900_LG_PROJ ADD CONSTRAINT MDI900_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI900_LG_PROJ ADD CONSTRAINT MDI900_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI900_I1;
DROP INDEX MDI900_I2;
CREATE INDEX MDI.MDI900_PLANYEAR_BBANKSUBID ON MDI.MDI900_LG_PROJ (PLANYEAR,BBANK_SUB_ID);
CREATE INDEX MDI.MDI900_PLANYEAR_CKTID ON MDI.MDI900_LG_PROJ (PLANYEAR,CKT_ID);
--LG PROJ GIS
ALTER TABLE MDI.MDI905_LG_PROJ_GIS DROP CONSTRAINT MDI905_FK4;
ALTER TABLE MDI.MDI905_LG_PROJ_GIS DROP CONSTRAINT MDI905_FK3;
ALTER TABLE MDI.MDI905_LG_PROJ_GIS DROP CONSTRAINT MDI905_FK2;
ALTER TABLE MDI.MDI905_LG_PROJ_GIS ADD CONSTRAINT MDI905_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI905_LG_PROJ_GIS ADD CONSTRAINT MDI905_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI905_LG_PROJ_GIS ADD CONSTRAINT MDI905_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI905_I;
CREATE INDEX MDI.MDI905_PLANYEAR_LGPROJID ON MDI.MDI905_LG_PROJ_GIS (PLANYEAR,LG_PROJ_ID);
--LG PROJ FILE
ALTER TABLE MDI.MDI907_LG_PROJ_FILE DROP CONSTRAINT MDI907_FK2;
ALTER TABLE MDI.MDI907_LG_PROJ_FILE DROP CONSTRAINT MDI907_FK4;
ALTER TABLE MDI.MDI907_LG_PROJ_FILE DROP CONSTRAINT MDI907_FK3;
ALTER TABLE MDI.MDI907_LG_PROJ_FILE ADD CONSTRAINT MDI907_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI907_LG_PROJ_FILE ADD CONSTRAINT MDI907_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI907_LG_PROJ_FILE ADD CONSTRAINT MDI907_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI907_I;
CREATE INDEX MDI.MDI907_PLANYEAR_LGPROJID ON MDI.MDI907_LG_PROJ_FILE (PLANYEAR,LG_PROJ_ID);
--LG PROJ DRIVER
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER DROP CONSTRAINT MDIT60_FK03;
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER DROP CONSTRAINT MDIT60_FK02;
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER DROP CONSTRAINT MDIT60_FK04;
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER ADD CONSTRAINT MDIT60_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER ADD CONSTRAINT MDIT60_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT60_LG_PROJ_DRIVER ADD CONSTRAINT MDIT60_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--ASSUMPTION
ALTER TABLE MDI.MDIT65_ASSUMPTION DROP CONSTRAINT MDIT65_FK03;
ALTER TABLE MDI.MDIT65_ASSUMPTION DROP CONSTRAINT MDIT65_FK02;
ALTER TABLE MDI.MDIT65_ASSUMPTION DROP CONSTRAINT MDIT65_FK01;
ALTER TABLE MDI.MDIT65_ASSUMPTION ADD CONSTRAINT MDIT65_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT65_ASSUMPTION ADD CONSTRAINT MDIT65_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT65_ASSUMPTION ADD CONSTRAINT MDIT65_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--LOC
ALTER TABLE MDI.MDIT70_LOC DROP CONSTRAINT MDIT70_FK03;
ALTER TABLE MDI.MDIT70_LOC DROP CONSTRAINT MDIT70_FK02;
ALTER TABLE MDI.MDIT70_LOC DROP CONSTRAINT MDIT70_FK01;
ALTER TABLE MDI.MDIT70_LOC ADD CONSTRAINT MDIT70_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT70_LOC ADD CONSTRAINT MDIT70_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT70_LOC ADD CONSTRAINT MDIT70_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--ASSUMPTION LOC
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC DROP CONSTRAINT MDIT75_FK05;
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC DROP CONSTRAINT MDIT75_FK04;
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC DROP CONSTRAINT MDIT75_FK03;
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC ADD CONSTRAINT MDIT75_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC ADD CONSTRAINT MDIT75_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT75_ASSUMPTION_LOC ADD CONSTRAINT MDIT75_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIT75_ASSUMPTIONID ON MDI.MDIT75_ASSUMPTION_LOC (ASSUMPTION_ID);
--SCE PROJ ASSUMPTION
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION DROP CONSTRAINT MDIT80_FK06;
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION DROP CONSTRAINT MDIT80_FK05;
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION DROP CONSTRAINT MDIT80_FK04;
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION ADD CONSTRAINT MDIT80_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION ADD CONSTRAINT MDIT80_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT80_SCE_PROJ_ASSUMPTION ADD CONSTRAINT MDIT80_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIT80_SCEPROJREVID ON MDI.MDIT80_SCE_PROJ_ASSUMPTION (SCE_PROJ_REV_ID);
--MITIGATION RISK
ALTER TABLE MDI.MDIV20_MITIGATION_RISK DROP CONSTRAINT MDIV20_FK02;
ALTER TABLE MDI.MDIV20_MITIGATION_RISK DROP CONSTRAINT MDIV20_FK01;
ALTER TABLE MDI.MDIV20_MITIGATION_RISK DROP CONSTRAINT MDIV20_FK03;
ALTER TABLE MDI.MDIV20_MITIGATION_RISK ADD CONSTRAINT MDIV20_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV20_MITIGATION_RISK ADD CONSTRAINT MDIV20_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV20_MITIGATION_RISK ADD CONSTRAINT MDIV20_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--MITIGATION
ALTER TABLE MDI.MDIV10_MITIGATION DROP CONSTRAINT MDIV10_FK03;
ALTER TABLE MDI.MDIV10_MITIGATION DROP CONSTRAINT MDIV10_FK02;
ALTER TABLE MDI.MDIV10_MITIGATION DROP CONSTRAINT MDIV10_FK01;
ALTER TABLE MDI.MDIV10_MITIGATION ADD CONSTRAINT MDIV10_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV10_MITIGATION ADD CONSTRAINT MDIV10_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV10_MITIGATION ADD CONSTRAINT MDIV10_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SCE PROJ MITIGATION
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP COLUMN PLANYEAR;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP COLUMN SWT_PROC_LINK;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP COLUMN SIM_ID;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP COLUMN CRIT_EXCEPT_LINK;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK04;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK03;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK02;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK12;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK11;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK10;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION DROP CONSTRAINT MDIV30_FK9;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION ADD CONSTRAINT MDIV30_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION ADD CONSTRAINT MDIV30_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV30_SCE_PROJ_MITIGATION ADD CONSTRAINT MDIV30_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIV30_SCEPROJREVID ON MDI.MDIV30_SCE_PROJ_MITIGATION (SCE_PROJ_REV_ID);
--Bid Package
CREATE SEQUENCE MDI.MDIU65_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU65_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU65_BID_PACKAGE(
	ID NUMBER(9) NOT NULL,
	SCE_PROJ_REV_ID NUMBER(9) NOT NULL,
	NAME VARCHAR2(32) NOT NULL,
	DESCRIPTION VARCHAR2(1024) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU65_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU65_FK1 FOREIGN KEY (SCE_PROJ_REV_ID) REFERENCES MDI.MDIS40_SCE_PROJ_REV (SCE_PROJ_REV_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU65_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU65_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU65_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU65_SCEPROJREVID ON MDI.MDIU65_BID_PACKAGE (SCE_PROJ_REV_ID);
GRANT SELECT ON MDI.MDIU65_BID_PACKAGE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU65_BID_PACKAGE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU65_BID_PACKAGE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU65_BID_PACKAGE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU65_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU65_BID_PACKAGE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU65_BID_PACKAGE',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU65_BID_PACKAGE',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU65_BID_PACKAGE',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Bid Item
CREATE TABLE MDI.MDIU67_BID_ITEM(
	BID_PACKAGE_ID NUMBER(9) NOT NULL,
	SCOPE_ITEM_ID NUMBER(9) NOT NULL,
	COST_TYPE_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU67_PK PRIMARY KEY (BID_PACKAGE_ID,SCOPE_ITEM_ID,COST_TYPE_ID),
	CONSTRAINT MDIU67_FK1 FOREIGN KEY (BID_PACKAGE_ID) REFERENCES MDI.MDIU65_BID_PACKAGE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU67_FK2 FOREIGN KEY (SCOPE_ITEM_ID) REFERENCES MDI.MDISX3_SCOPE_ITEM (SCOPE_ITEM_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU67_FK5 FOREIGN KEY (COST_TYPE_ID) REFERENCES MDI.MDIU25_COST_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU67_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU67_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU67_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU67_BIDPACKAGEID ON MDI.MDIU67_BID_ITEM (BID_PACKAGE_ID);
CREATE INDEX MDI.MDIU67_SCOPEITEMID ON MDI.MDIU67_BID_ITEM (SCOPE_ITEM_ID);
GRANT SELECT ON MDI.MDIU67_BID_ITEM TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU67_BID_ITEM TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU67_BID_ITEM TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU67_BID_ITEM TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU67_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU67_BID_ITEM
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU67_BID_ITEM',
				TO_CHAR(:NEW.BID_PACKAGE_ID)||'-'||TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.COST_TYPE_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU67_BID_ITEM',
				TO_CHAR(:NEW.BID_PACKAGE_ID)||'-'||TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.COST_TYPE_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU67_BID_ITEM',
				TO_CHAR(:OLD.BID_PACKAGE_ID)||'-'||TO_CHAR(:OLD.SCOPE_ITEM_ID)||'-'||TO_CHAR(:OLD.COST_TYPE_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Scope Item Forecast
CREATE TABLE MDI.MDIU33_SCOPE_ITEM_FORECAST(
	SCOPE_ITEM_ID NUMBER(9) NOT NULL,
	COST_TYPE_ID NUMBER(9) NOT NULL,
	YEAR NUMBER(4) NOT NULL,
	PERCENT FLOAT(24),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU33_PK PRIMARY KEY (SCOPE_ITEM_ID,COST_TYPE_ID,YEAR),
	CONSTRAINT MDIU33_FK1 FOREIGN KEY (SCOPE_ITEM_ID) REFERENCES MDI.MDISX3_SCOPE_ITEM (SCOPE_ITEM_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU33_FK2 FOREIGN KEY (COST_TYPE_ID) REFERENCES MDI.MDIU25_COST_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU33_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU33_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU33_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU33_SCOPEITEMID ON MDI.MDIU33_SCOPE_ITEM_FORECAST (SCOPE_ITEM_ID);
GRANT SELECT ON MDI.MDIU33_SCOPE_ITEM_FORECAST TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU33_SCOPE_ITEM_FORECAST TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU33_SCOPE_ITEM_FORECAST TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU33_SCOPE_ITEM_FORECAST TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU33_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU33_SCOPE_ITEM_FORECAST
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU33_SCOPE_ITEM_FORECAST',
				TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.COST_TYPE_ID)||'-'||TO_CHAR(:NEW.YEAR),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU33_SCOPE_ITEM_FORECAST',
				TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.COST_TYPE_ID)||'-'||TO_CHAR(:NEW.YEAR),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU33_SCOPE_ITEM_FORECAST',
				TO_CHAR(:OLD.SCOPE_ITEM_ID)||'-'||TO_CHAR(:OLD.COST_TYPE_ID)||'-'||TO_CHAR(:OLD.YEAR),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Descriptive Type
CREATE SEQUENCE MDI.MDIU55_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU55_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU55_DESCRIPTIVE_TYPE(
	ID NUMBER(9) NOT NULL,
	PART_TYPE_ID NUMBER(9) NOT NULL,
	NAME VARCHAR2(32) NOT NULL,
	DESCRIPTION VARCHAR2(128),
	USER_EDITABLE NUMBER(1),
	INPUT_TYPE NUMBER(2) NOT NULL,
	OPTIONS VARCHAR2(1024),
	DEFAULT_VALUE VARCHAR2(64),
	UNITS VARCHAR2(32),
	INPUT_INSTRUCTIONS VARCHAR2(256),
	NOTE VARCHAR2(512),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU55_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU55_FK1 FOREIGN KEY (PART_TYPE_ID) REFERENCES MDI.MDISP2_PART_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU55_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU55_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU55_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU55_PARTTYPEID ON MDI.MDIU55_DESCRIPTIVE_TYPE (PART_TYPE_ID);
GRANT SELECT ON MDI.MDIU55_DESCRIPTIVE_TYPE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU55_DESCRIPTIVE_TYPE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU55_DESCRIPTIVE_TYPE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU55_DESCRIPTIVE_TYPE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU55_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU55_DESCRIPTIVE_TYPE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU55_DESCRIPTIVE_TYPE',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU55_DESCRIPTIVE_TYPE',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU55_DESCRIPTIVE_TYPE',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Scope Type Descriptive
CREATE TABLE MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE(
	SCOPE_TYPE_ID NUMBER(9) NOT NULL,
	DESC_TYPE_ID NUMBER(9) NOT NULL,
	APPLICABLE NUMBER(1) DEFAULT 1,
	USER_EDITABLE NUMBER(1),
	DEFAULT_VALUE VARCHAR2(64),
	NOTE VARCHAR2(512),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU60_PK PRIMARY KEY (SCOPE_TYPE_ID,DESC_TYPE_ID),
	CONSTRAINT MDIU60_FK1 FOREIGN KEY (SCOPE_TYPE_ID) REFERENCES MDI.MDISX1_SCOPE_TYPE (SCOPE_TYPE_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU60_FK2 FOREIGN KEY (DESC_TYPE_ID) REFERENCES MDI.MDIU55_DESCRIPTIVE_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU60_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU60_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU60_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU60_SCOPETYPEID ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE (SCOPE_TYPE_ID);
GRANT SELECT ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU60_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU60_SCOPE_TYPE_DESCRIPTIVE',
				TO_CHAR(:NEW.SCOPE_TYPE_ID)||'-'||TO_CHAR(:NEW.DESC_TYPE_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU60_SCOPE_TYPE_DESCRIPTIVE',
				TO_CHAR(:NEW.SCOPE_TYPE_ID)||'-'||TO_CHAR(:NEW.DESC_TYPE_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU60_SCOPE_TYPE_DESCRIPTIVE',
				TO_CHAR(:OLD.SCOPE_TYPE_ID)||'-'||TO_CHAR(:OLD.DESC_TYPE_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Scope Item Descriptive
CREATE TABLE MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE(
	SCOPE_ITEM_ID NUMBER(9) NOT NULL,
	DESC_TYPE_ID NUMBER(9) NOT NULL,
	APPLICABLE NUMBER(1) DEFAULT 1,
	USER_VALUE VARCHAR2(64),
	NOTE VARCHAR2(512),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU62_PK PRIMARY KEY (SCOPE_ITEM_ID,DESC_TYPE_ID),
	CONSTRAINT MDIU62_FK1 FOREIGN KEY (SCOPE_ITEM_ID) REFERENCES MDI.MDISX3_SCOPE_ITEM (SCOPE_ITEM_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU62_FK2 FOREIGN KEY (DESC_TYPE_ID) REFERENCES MDI.MDIU55_DESCRIPTIVE_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU62_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU62_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU62_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU62_SCOPEITEMID ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE (SCOPE_ITEM_ID);
GRANT SELECT ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU62_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU62_SCOPE_ITEM_DESCRIPTIVE',
				TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.DESC_TYPE_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU62_SCOPE_ITEM_DESCRIPTIVE',
				TO_CHAR(:NEW.SCOPE_ITEM_ID)||'-'||TO_CHAR(:NEW.DESC_TYPE_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU62_SCOPE_ITEM_DESCRIPTIVE',
				TO_CHAR(:OLD.SCOPE_ITEM_ID)||'-'||TO_CHAR(:OLD.DESC_TYPE_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--PART TYPE CPR
CREATE SEQUENCE MDI.MDISX7_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISX7_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISX7_PART_TYPE_CPR(
	ID NUMBER(9) NOT NULL,
	PART_TYPE_ID NUMBER(9) NOT NULL,
	CPR_PLANT_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISX7_PK PRIMARY KEY (ID),
	CONSTRAINT MDISX7_FK01I FOREIGN KEY (PART_TYPE_ID) REFERENCES MDI.MDISP2_PART_TYPE (ID) ON DELETE CASCADE,
	CONSTRAINT MDISX7_FK02I FOREIGN KEY (CPR_PLANT_ID) REFERENCES MDI.MDISC0_CPR_PLANT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISX7_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX7_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX7_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISX7_PARTTYPEID ON MDI.MDISX7_PART_TYPE_CPR (PART_TYPE_ID);
GRANT SELECT ON MDI.MDISX7_PART_TYPE_CPR TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISX7_PART_TYPE_CPR TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISX7_PART_TYPE_CPR TO MDI_R_USER;
GRANT DELETE ON MDI.MDISX7_PART_TYPE_CPR TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISX7_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISX7_PART_TYPE_CPR
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX7_PART_TYPE_CPR',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX7_PART_TYPE_CPR',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX7_PART_TYPE_CPR',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCOPE TYPE CPR
CREATE SEQUENCE MDI.MDISX8_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISX8_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISX8_SCOPE_TYPE_CPR(
	ID NUMBER(9) NOT NULL,
	SCOPE_TYPE_ID NUMBER(9) NOT NULL,
	CPR_PLANT_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISX8_PK PRIMARY KEY (ID),
	CONSTRAINT MDISX8_FK01I FOREIGN KEY (SCOPE_TYPE_ID) REFERENCES MDI.MDISX1_SCOPE_TYPE (SCOPE_TYPE_ID) ON DELETE CASCADE,
	CONSTRAINT MDISX8_FK02I FOREIGN KEY (CPR_PLANT_ID) REFERENCES MDI.MDISC0_CPR_PLANT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISX8_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX8_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX8_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISX8_SCOPETYPEID ON MDI.MDISX8_SCOPE_TYPE_CPR (SCOPE_TYPE_ID);
GRANT SELECT ON MDI.MDISX8_SCOPE_TYPE_CPR TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISX8_SCOPE_TYPE_CPR TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISX8_SCOPE_TYPE_CPR TO MDI_R_USER;
GRANT DELETE ON MDI.MDISX8_SCOPE_TYPE_CPR TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISX8_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISX8_SCOPE_TYPE_CPR
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX8_SCOPE_TYPE_CPR',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX8_SCOPE_TYPE_CPR',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX8_SCOPE_TYPE_CPR',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--CPR Prime
CREATE SEQUENCE MDI.MDISC4_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISC4_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISC4_CPR_PRIME(
	ID NUMBER(9) NOT NULL,
	CPR_PLANT_ID NUMBER(9) NOT NULL,
	CPR_PRIME_ACCT_ID NUMBER(9) NOT NULL,
	PRIME VARCHAR2(5) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISC4_PK PRIMARY KEY (ID),
	CONSTRAINT MDISC4_FK1 FOREIGN KEY (CPR_PLANT_ID) REFERENCES MDI.MDISC0_CPR_PLANT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC4_FK2 FOREIGN KEY (CPR_PRIME_ACCT_ID) REFERENCES MDI.MDISC2_CPR_PRIME_ACCT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC4_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC4_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC4_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISC4_CPRPLANTID ON MDI.MDISC4_CPR_PRIME (CPR_PLANT_ID);
CREATE INDEX MDI.MDISC4_CPRPRIMEACCTID ON MDI.MDISC4_CPR_PRIME (CPR_PRIME_ACCT_ID);
GRANT SELECT ON MDI.MDISC4_CPR_PRIME TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISC4_CPR_PRIME TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISC4_CPR_PRIME TO MDI_R_USER;
GRANT DELETE ON MDI.MDISC4_CPR_PRIME TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISC4_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISC4_CPR_PRIME
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC4_CPR_PRIME',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC4_CPR_PRIME',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC4_CPR_PRIME',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--CPR SUB Acct
CREATE SEQUENCE MDI.MDISC6_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISC6_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISC6_CPR_SUB_ACCT(
	ID NUMBER(9) NOT NULL,
	NAME VARCHAR2(64) NOT NULL,
	DESCRIPTION VARCHAR2(128) NOT NULL,
	CPR_PRIME_ACCT_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISC6_PK PRIMARY KEY (ID),
	CONSTRAINT MDISC6_FK2 FOREIGN KEY (CPR_PRIME_ACCT_ID) REFERENCES MDI.MDISC2_CPR_PRIME_ACCT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISC6_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC6_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISC6_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISC6_CPRPRIMEACCTID ON MDI.MDISC6_CPR_SUB_ACCT (CPR_PRIME_ACCT_ID);
GRANT SELECT ON MDI.MDISC6_CPR_SUB_ACCT TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISC6_CPR_SUB_ACCT TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISC6_CPR_SUB_ACCT TO MDI_R_USER;
GRANT DELETE ON MDI.MDISC6_CPR_SUB_ACCT TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISC6_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISC6_CPR_SUB_ACCT
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC6_CPR_SUB_ACCT',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC6_CPR_SUB_ACCT',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISC6_CPR_SUB_ACCT',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Part Type
CREATE SEQUENCE MDI.MDISP2_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISP2_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISP2_PART_TYPE(
	ID NUMBER(9) NOT NULL,
	NAME VARCHAR2(64) NOT NULL,
	ACTIVE NUMBER(1),
	DESCRIPTION VARCHAR2(128),
	CPR_SUB_ACCT_ID NUMBER(9),
	FORECAST_CAT_ID NUMBER(9),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISP2_PK PRIMARY KEY (ID),
	CONSTRAINT MDISP2_FK01 FOREIGN KEY (CPR_SUB_ACCT_ID) REFERENCES MDI.MDISC6_CPR_SUB_ACCT (ID) ON DELETE CASCADE,
	CONSTRAINT MDISP2_FK02 FOREIGN KEY (FORECAST_CAT_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDISP2_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISP2_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISP2_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISP2_CPRSUBACCTID ON MDI.MDISP2_PART_TYPE (CPR_SUB_ACCT_ID);
GRANT SELECT ON MDI.MDISP2_PART_TYPE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISP2_PART_TYPE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISP2_PART_TYPE TO MDI_R_USER;
GRANT DELETE ON MDI.MDISP2_PART_TYPE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISP2_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISP2_PART_TYPE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISP2_PART_TYPE',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISP2_PART_TYPE',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISP2_PART_TYPE',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCOPE TYPE
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD PART_TYPE_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD MATERIAL_CODE VARCHAR2(16);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD PURCHASE_ORDER_NUM VARCHAR2(32);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD FUNDING_TYPE_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD FUNDER_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD OWNER_ORG_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD FORECAST_CAT_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CPR_SUB_ACCT_ID NUMBER(9);
ALTER TABLE MDI.MDISX1_SCOPE_TYPE DROP CONSTRAINT MDISX1_FK4;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE DROP CONSTRAINT MDISX1_FK3;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE DROP CONSTRAINT MDISX1_FK2;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK01 FOREIGN KEY (PART_TYPE_ID) REFERENCES MDI.MDISP2_PART_TYPE (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK04 FOREIGN KEY (FUNDING_TYPE_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK05 FOREIGN KEY (FUNDER_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK06 FOREIGN KEY (OWNER_ORG_ID) REFERENCES MDI.MDI002_ORG (ORG_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK08 FOREIGN KEY (FORECAST_CAT_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK07 FOREIGN KEY (CPR_SUB_ACCT_ID) REFERENCES MDI.MDISC6_CPR_SUB_ACCT (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDISX1_SCOPE_TYPE ADD CONSTRAINT MDISX1_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDISX1_PARTTYPEID ON MDI.MDISX1_SCOPE_TYPE (PART_TYPE_ID);
--CHANGE
ALTER TABLE MDI.MDIT30_CHANGE MODIFY HELP_TEXT VARCHAR2(1024);
ALTER TABLE MDI.MDIT30_CHANGE DROP CONSTRAINT MDIT30_FK03;
ALTER TABLE MDI.MDIT30_CHANGE DROP CONSTRAINT MDIT30_FK02;
ALTER TABLE MDI.MDIT30_CHANGE DROP CONSTRAINT MDIT30_FK01;
ALTER TABLE MDI.MDIT30_CHANGE ADD CONSTRAINT MDIT30_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT30_CHANGE ADD CONSTRAINT MDIT30_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT30_CHANGE ADD CONSTRAINT MDIT30_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--DRIVER CRITERIA
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA MODIFY HELP_TEXT VARCHAR2(1024);
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA MODIFY ALT_VARCHAR1 VARCHAR2(1024);
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA DROP CONSTRAINT MDIT35_FK03;
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA DROP CONSTRAINT MDIT35_FK02;
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA DROP CONSTRAINT MDIT35_FK01;
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA ADD CONSTRAINT MDIT35_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA ADD CONSTRAINT MDIT35_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT35_DRIVER_CRITERIA ADD CONSTRAINT MDIT35_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--RECOMMENDED DRIVER
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER DROP CONSTRAINT MDIT40_FK03;
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER DROP CONSTRAINT MDIT40_FK02;
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER DROP CONSTRAINT MDIT40_FK01;
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER ADD CONSTRAINT MDIT40_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER ADD CONSTRAINT MDIT40_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT40_RECOMMENDED_DRIVER ADD CONSTRAINT MDIT40_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIT40_PROGRAMID ON MDI.MDIT40_RECOMMENDED_DRIVER (PROGRAM_ID);
--Default Part
CREATE SEQUENCE MDI.MDIU10_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU10_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU10_DEFAULT_PART(
	ID NUMBER(9) NOT NULL,
	PARENT_ST_ID NUMBER(9) NOT NULL,
	SCOPE_TYPE_ID NUMBER(9) NOT NULL,
	ACTION_ID NUMBER(9) NOT NULL,
	TERRAIN_ID NUMBER(9),
	POPULATION_ID NUMBER(9),
	PER_UNIT_QTY FLOAT(24),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU10_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU10_FK1 FOREIGN KEY (PARENT_ST_ID) REFERENCES MDI.MDISX1_SCOPE_TYPE (SCOPE_TYPE_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU10_FK2 FOREIGN KEY (SCOPE_TYPE_ID) REFERENCES MDI.MDISX1_SCOPE_TYPE (SCOPE_TYPE_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU10_FK3 FOREIGN KEY (ACTION_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU10_FK4 FOREIGN KEY (TERRAIN_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU10_FK5 FOREIGN KEY (POPULATION_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU10_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU10_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU10_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU10_PARENTSTID ON MDI.MDIU10_DEFAULT_PART (PARENT_ST_ID);
GRANT SELECT ON MDI.MDIU10_DEFAULT_PART TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU10_DEFAULT_PART TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU10_DEFAULT_PART TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU10_DEFAULT_PART TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU10_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU10_DEFAULT_PART
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU10_DEFAULT_PART',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU10_DEFAULT_PART',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU10_DEFAULT_PART',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCOPE TYPE ELEM
CREATE SEQUENCE MDI.MDISX6_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDISX6_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDISX6_SCOPE_TYPE_ELEM(
	ID NUMBER(9) NOT NULL,
	SCOPE_TYPE_ID NUMBER(9) NOT NULL,
	SCE_ELEM_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDISX6_PK PRIMARY KEY (ID),
	CONSTRAINT MDISX6_FK01I FOREIGN KEY (SCOPE_TYPE_ID) REFERENCES MDI.MDISX1_SCOPE_TYPE (SCOPE_TYPE_ID) ON DELETE CASCADE,
	CONSTRAINT MDISX6_FK02I FOREIGN KEY (SCE_ELEM_ID) REFERENCES MDI.MDIS70_SCE_ELEM (SCE_ELEM_ID) ON DELETE CASCADE,
	CONSTRAINT MDISX6_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX6_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDISX6_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDISX6_SCOPETYPEID ON MDI.MDISX6_SCOPE_TYPE_ELEM (SCOPE_TYPE_ID);
GRANT SELECT ON MDI.MDISX6_SCOPE_TYPE_ELEM TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDISX6_SCOPE_TYPE_ELEM TO MDI_R_USER;
GRANT UPDATE ON MDI.MDISX6_SCOPE_TYPE_ELEM TO MDI_R_USER;
GRANT DELETE ON MDI.MDISX6_SCOPE_TYPE_ELEM TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDISX6_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDISX6_SCOPE_TYPE_ELEM
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX6_SCOPE_TYPE_ELEM',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX6_SCOPE_TYPE_ELEM',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDISX6_SCOPE_TYPE_ELEM',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--ESCALATION RATE
ALTER TABLE MDI.MDIT20_ESCALATION_RATE DROP CONSTRAINT MDIT20_FK05;
ALTER TABLE MDI.MDIT20_ESCALATION_RATE DROP CONSTRAINT MDIT20_FK04;
ALTER TABLE MDI.MDIT20_ESCALATION_RATE DROP CONSTRAINT MDIT20_FK03;
ALTER TABLE MDI.MDIT20_ESCALATION_RATE ADD CONSTRAINT MDIT20_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT20_ESCALATION_RATE ADD CONSTRAINT MDIT20_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIT20_ESCALATION_RATE ADD CONSTRAINT MDIT20_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIT20_I1;
CREATE INDEX MDI.MDIT20_PROGRAMID ON MDI.MDIT20_ESCALATION_RATE (PROGRAM_ID);
--COST STAGE
ALTER TABLE MDI.MDIS75_COST_STAGE DROP CONSTRAINT MDIS75_FK03;
ALTER TABLE MDI.MDIS75_COST_STAGE DROP CONSTRAINT MDIS75_FK02;
ALTER TABLE MDI.MDIS75_COST_STAGE DROP CONSTRAINT MDIS75_FK01;
ALTER TABLE MDI.MDIS75_COST_STAGE ADD CONSTRAINT MDIS75_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS75_COST_STAGE ADD CONSTRAINT MDIS75_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS75_COST_STAGE ADD CONSTRAINT MDIS75_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROJ CONTINGENCY
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY DROP CONSTRAINT MDIV80_FK06;
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY DROP CONSTRAINT MDIV80_FK05;
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY DROP CONSTRAINT MDIV80_FK04;
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY ADD CONSTRAINT MDIV80_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY ADD CONSTRAINT MDIV80_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV80_PROJ_CONTINGENCY ADD CONSTRAINT MDIV80_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIV80_I01;
--Cost Sheet O H
CREATE SEQUENCE MDI.MDIU73_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU73_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU73_COST_SHEET_O_H(
	ID NUMBER(9) NOT NULL,
	COST_SHEET_ID NUMBER(9) NOT NULL,
	OVERHEAD_KEY_ID NUMBER(9) NOT NULL,
	SCE_ELEM_ID NUMBER(9),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU73_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU73_FK1 FOREIGN KEY (COST_SHEET_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU73_FK2 FOREIGN KEY (OVERHEAD_KEY_ID) REFERENCES MDI.MDIU72_OVERHEAD_KEY (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU73_FK3 FOREIGN KEY (SCE_ELEM_ID) REFERENCES MDI.MDIS70_SCE_ELEM (SCE_ELEM_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU73_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU73_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU73_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU73_COSTSHEETID ON MDI.MDIU73_COST_SHEET_O_H (COST_SHEET_ID);
CREATE INDEX MDI.MDIU73_OVERHEADKEYID ON MDI.MDIU73_COST_SHEET_O_H (OVERHEAD_KEY_ID);
GRANT SELECT ON MDI.MDIU73_COST_SHEET_O_H TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU73_COST_SHEET_O_H TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU73_COST_SHEET_O_H TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU73_COST_SHEET_O_H TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU73_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU73_COST_SHEET_O_H
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU73_COST_SHEET_O_H',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU73_COST_SHEET_O_H',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU73_COST_SHEET_O_H',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--Overhead Loader Rate
CREATE SEQUENCE MDI.MDIU75_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIU75_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIU75_OVERHEAD_LOADER_RATE(
	ID NUMBER(9),
	LOADER_ID NUMBER(9),
	COST_SHEET_O_H_ID NUMBER(9),
	EFF_DATE DATE,
	RATE FLOAT(24),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU75_PK PRIMARY KEY (ID),
	CONSTRAINT MDIU75_FK1 FOREIGN KEY (LOADER_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU75_FK2 FOREIGN KEY (COST_SHEET_O_H_ID) REFERENCES MDI.MDIU73_COST_SHEET_O_H (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU75_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU75_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU75_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU75_COSTSHEETOHID ON MDI.MDIU75_OVERHEAD_LOADER_RATE (COST_SHEET_O_H_ID);
GRANT SELECT ON MDI.MDIU75_OVERHEAD_LOADER_RATE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU75_OVERHEAD_LOADER_RATE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU75_OVERHEAD_LOADER_RATE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU75_OVERHEAD_LOADER_RATE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU75_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU75_OVERHEAD_LOADER_RATE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU75_OVERHEAD_LOADER_RATE',
				TO_CHAR(:NEW.ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU75_OVERHEAD_LOADER_RATE',
				TO_CHAR(:NEW.ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU75_OVERHEAD_LOADER_RATE',
				TO_CHAR(:OLD.ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--QBR
ALTER TABLE MDI.MDIS97_QBR DROP CONSTRAINT MDIS97_FK4;
ALTER TABLE MDI.MDIS97_QBR DROP CONSTRAINT MDIS97_FK3;
ALTER TABLE MDI.MDIS97_QBR DROP CONSTRAINT MDIS97_FK2;
ALTER TABLE MDI.MDIS97_QBR ADD CONSTRAINT MDIS97_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS97_QBR ADD CONSTRAINT MDIS97_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS97_QBR ADD CONSTRAINT MDIS97_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS97_U1;
--SUB QBR
ALTER TABLE MDI.MDIS98_SUB_QBR DROP CONSTRAINT MDIS98_FK5;
ALTER TABLE MDI.MDIS98_SUB_QBR DROP CONSTRAINT MDIS98_FK4;
ALTER TABLE MDI.MDIS98_SUB_QBR DROP CONSTRAINT MDIS98_FK3;
ALTER TABLE MDI.MDIS98_SUB_QBR ADD CONSTRAINT MDIS98_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS98_SUB_QBR ADD CONSTRAINT MDIS98_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS98_SUB_QBR ADD CONSTRAINT MDIS98_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS98_U1;
--SCE PROJ ELEM COST
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD COST_SHEET_OH_KEY_ID NUMBER(9);
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP COLUMN CWIP;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP COLUMN ABANDONED;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP COLUMN ROE;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP COLUMN ROE_ADDER;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP CONSTRAINT MDIS80_FK6;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP CONSTRAINT MDIS80_FK5;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP CONSTRAINT MDIS80_FK4;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP CONSTRAINT MDIS80_FK1I;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST DROP CONSTRAINT MDIS80_FK8;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK14 FOREIGN KEY (COST_SHEET_OH_KEY_ID) REFERENCES MDI.MDIU73_COST_SHEET_O_H (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK01 FOREIGN KEY (SCE_PROJ_REV_ID) REFERENCES MDI.MDIS40_SCE_PROJ_REV (SCE_PROJ_REV_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK02 FOREIGN KEY (SCE_ELEM_ID) REFERENCES MDI.MDIS70_SCE_ELEM (SCE_ELEM_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS80_SCE_PROJ_ELEM_COST ADD CONSTRAINT MDIS80_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIS80_I1;
DROP INDEX MDIS80_I2;
CREATE INDEX MDI.MDIS80_SCEELEMID ON MDI.MDIS80_SCE_PROJ_ELEM_COST (SCE_ELEM_ID);
CREATE INDEX MDI.MDIS80_SCEPROJREVID ON MDI.MDIS80_SCE_PROJ_ELEM_COST (SCE_PROJ_REV_ID);
--SCE PROJ ELEM COST YEAR
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDIS85_FK4;
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDIS85_FK3;
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDIS85_FK2;
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDIS85_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDIS85_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDIS85_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS85_COSTID ON MDI.MDIS85_SCE_PROJ_ELEM_COST_YEAR (COST_ID);
--CUSTOMER
CREATE SEQUENCE MDI.MDIS02_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIS02_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIS02_CUSTOMER(
	CUSTOMER_ID NUMBER(9) NOT NULL,
	COMPANY_NAME VARCHAR2(128) NOT NULL,
	INTERCONN_DATE DATE,
	CONTACT_NAME VARCHAR2(64),
	ADDRESS1 VARCHAR2(64),
	ADDRESS2 VARCHAR2(64),
	CITY VARCHAR2(64),
	ZIP_CODE VARCHAR2(5),
	DISABLED NUMBER(1),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIS02_PK PRIMARY KEY (CUSTOMER_ID),
	CONSTRAINT MDIS02_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS02_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS02_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
GRANT SELECT ON MDI.MDIS02_CUSTOMER TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIS02_CUSTOMER TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIS02_CUSTOMER TO MDI_R_USER;
GRANT DELETE ON MDI.MDIS02_CUSTOMER TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIS02_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIS02_CUSTOMER
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS02_CUSTOMER',
				TO_CHAR(:NEW.CUSTOMER_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS02_CUSTOMER',
				TO_CHAR(:NEW.CUSTOMER_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS02_CUSTOMER',
				TO_CHAR(:OLD.CUSTOMER_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--COST ALLOCATION
CREATE TABLE MDI.MDIS87_COST_ALLOCATION(
	SPEC_ID NUMBER(9) NOT NULL,
	CUSTOMER_ID NUMBER(9) NOT NULL,
	ALLOCATION FLOAT(24),
	DESCRIPTION VARCHAR2(128),
	ALT_INTEGER NUMBER(4),
	ALT_DOUBLE FLOAT(24),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIS87_PK PRIMARY KEY (SPEC_ID,CUSTOMER_ID),
	CONSTRAINT MDIS87_FK01I FOREIGN KEY (SPEC_ID) REFERENCES MDI.MDIS80_SCE_PROJ_ELEM_COST (COST_ID) ON DELETE CASCADE,
	CONSTRAINT MDIS87_FK02I FOREIGN KEY (CUSTOMER_ID) REFERENCES MDI.MDIS02_CUSTOMER (CUSTOMER_ID) ON DELETE CASCADE,
	CONSTRAINT MDIS87_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS87_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS87_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIS87_CUSTOMERID ON MDI.MDIS87_COST_ALLOCATION (CUSTOMER_ID);
CREATE INDEX MDI.MDIS87_SPECID ON MDI.MDIS87_COST_ALLOCATION (SPEC_ID);
GRANT SELECT ON MDI.MDIS87_COST_ALLOCATION TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIS87_COST_ALLOCATION TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIS87_COST_ALLOCATION TO MDI_R_USER;
GRANT DELETE ON MDI.MDIS87_COST_ALLOCATION TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIS87_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIS87_COST_ALLOCATION
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS87_COST_ALLOCATION',
				TO_CHAR(:NEW.SPEC_ID)||'-'||TO_CHAR(:NEW.CUSTOMER_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS87_COST_ALLOCATION',
				TO_CHAR(:NEW.SPEC_ID)||'-'||TO_CHAR(:NEW.CUSTOMER_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS87_COST_ALLOCATION',
				TO_CHAR(:OLD.SPEC_ID)||'-'||TO_CHAR(:OLD.CUSTOMER_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCE PROJ ELEM PRIORITY
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY DROP CONSTRAINT MDIS95_FK5;
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY DROP CONSTRAINT MDIS95_FK4;
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY DROP CONSTRAINT MDIS95_FK3;
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY ADD CONSTRAINT MDIS95_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY ADD CONSTRAINT MDIS95_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY ADD CONSTRAINT MDIS95_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS95_COSTID ON MDI.MDIS95_SCE_PROJ_ELEM_PRIORITY (COST_ID);
--Cost Loader Rate
CREATE TABLE MDI.MDIU80_COST_LOADER_RATE(
	COST_ID NUMBER(9) NOT NULL,
	LOADER_ID NUMBER(9) NOT NULL,
	RATE FLOAT(24),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU80_PK PRIMARY KEY (COST_ID,LOADER_ID),
	CONSTRAINT MDIU80_FK1 FOREIGN KEY (COST_ID) REFERENCES MDI.MDIS80_SCE_PROJ_ELEM_COST (COST_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU80_FK2 FOREIGN KEY (LOADER_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU80_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU80_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU80_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU80_COSTID ON MDI.MDIU80_COST_LOADER_RATE (COST_ID);
GRANT SELECT ON MDI.MDIU80_COST_LOADER_RATE TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU80_COST_LOADER_RATE TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU80_COST_LOADER_RATE TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU80_COST_LOADER_RATE TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU80_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU80_COST_LOADER_RATE
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU80_COST_LOADER_RATE',
				TO_CHAR(:NEW.COST_ID)||'-'||TO_CHAR(:NEW.LOADER_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU80_COST_LOADER_RATE',
				TO_CHAR(:NEW.COST_ID)||'-'||TO_CHAR(:NEW.LOADER_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU80_COST_LOADER_RATE',
				TO_CHAR(:OLD.COST_ID)||'-'||TO_CHAR(:OLD.LOADER_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--PROGRAM SAP WBS
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS DROP CONSTRAINT MDIS32_FK5;
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS DROP CONSTRAINT MDIS32_FK4;
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS DROP CONSTRAINT MDIS32_FK3;
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS ADD CONSTRAINT MDIS32_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS ADD CONSTRAINT MDIS32_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS32_PROGRAM_SAP_WBS ADD CONSTRAINT MDIS32_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS32_PROGRAMID ON MDI.MDIS32_PROGRAM_SAP_WBS (PROGRAM_ID);
CREATE INDEX MDI.MDIS32_SAPWBSID ON MDI.MDIS32_PROGRAM_SAP_WBS (SAP_WBS_ID);
--PROG EXCEPT
ALTER TABLE MDI.MDI567_PROG_EXCEPT DROP CONSTRAINT MDI567_FK4;
ALTER TABLE MDI.MDI567_PROG_EXCEPT DROP CONSTRAINT MDI567_FK3;
ALTER TABLE MDI.MDI567_PROG_EXCEPT DROP CONSTRAINT MDI567_FK2;
ALTER TABLE MDI.MDI567_PROG_EXCEPT ADD CONSTRAINT MDI567_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI567_PROG_EXCEPT ADD CONSTRAINT MDI567_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI567_PROG_EXCEPT ADD CONSTRAINT MDI567_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI567_I2;
DROP INDEX MDI567_U;
CREATE INDEX MDI.MDI567_PLANYEAR_PROGID ON MDI.MDI567_PROG_EXCEPT (PLANYEAR,PROG_ID);
CREATE INDEX MDI.MDI567_PROGRAMID ON MDI.MDI567_PROG_EXCEPT (PROGRAM_ID);
--CRIT EXCEPT
ALTER TABLE MDI.MDI570_CRIT_EXCEPT DROP CONSTRAINT MDI570_FK9;
ALTER TABLE MDI.MDI570_CRIT_EXCEPT DROP CONSTRAINT MDI570_FK8;
ALTER TABLE MDI.MDI570_CRIT_EXCEPT DROP CONSTRAINT MDI570_FK7;
ALTER TABLE MDI.MDI570_CRIT_EXCEPT ADD CONSTRAINT MDI570_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI570_CRIT_EXCEPT ADD CONSTRAINT MDI570_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI570_CRIT_EXCEPT ADD CONSTRAINT MDI570_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI570_I1;
DROP INDEX MDI570_I2;
CREATE INDEX MDI.MDI570_PLANYEAR_EXTYPEID ON MDI.MDI570_CRIT_EXCEPT (PLANYEAR,EX_TYPE_ID);
CREATE INDEX MDI.MDI570_PLANYEAR_SUBID ON MDI.MDI570_CRIT_EXCEPT (PLANYEAR,SUB_ID);
--PORTFOLIO PROJ
CREATE SEQUENCE MDI.MDIS34_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIS34_SEQ TO MDI_R_USER;
CREATE TABLE MDI.MDIS34_PORTFOLIO_PROJ(
	PORTFOLIO_ID NUMBER(9) NOT NULL,
	PLAN_ID NUMBER(9) NOT NULL,
	PARENT_ID NUMBER(9),
	PLAN_DESCRIPTION VARCHAR2(64),
	PLAN_TYPE NUMBER(2) NOT NULL,
	SCE_PROJ_ID NUMBER(9),
	PLAN_VERSION NUMBER(9),
	NEED_DATE DATE,
	PLAN_COST NUMBER(9),
	PLAN_LOCKED NUMBER(1),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIS34_PK PRIMARY KEY (PORTFOLIO_ID,PLAN_ID),
	CONSTRAINT MDIS34_FK02I FOREIGN KEY (SCE_PROJ_ID) REFERENCES MDI.MDIS35_SCE_PROJ (SCE_PROJ_ID) ON DELETE CASCADE,
	CONSTRAINT MDIS34_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS34_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS34_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIS34_SCEPROJID ON MDI.MDIS34_PORTFOLIO_PROJ (SCE_PROJ_ID);
GRANT SELECT ON MDI.MDIS34_PORTFOLIO_PROJ TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIS34_PORTFOLIO_PROJ TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIS34_PORTFOLIO_PROJ TO MDI_R_USER;
GRANT DELETE ON MDI.MDIS34_PORTFOLIO_PROJ TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIS34_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIS34_PORTFOLIO_PROJ
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS34_PORTFOLIO_PROJ',
				TO_CHAR(:NEW.PORTFOLIO_ID)||'-'||TO_CHAR(:NEW.PLAN_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS34_PORTFOLIO_PROJ',
				TO_CHAR(:NEW.PORTFOLIO_ID)||'-'||TO_CHAR(:NEW.PLAN_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS34_PORTFOLIO_PROJ',
				TO_CHAR(:OLD.PORTFOLIO_ID)||'-'||TO_CHAR(:OLD.PLAN_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--RELATION
CREATE TABLE MDI.MDIS36_RELATION(
	RELATION_ID NUMBER(9) NOT NULL,
	RELATED_ID NUMBER(9) NOT NULL,
	RELATION_TYPE VARCHAR2(2) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIS36_PK PRIMARY KEY (RELATION_ID,RELATED_ID),
	CONSTRAINT MDIS36_FK01i FOREIGN KEY (RELATION_ID) REFERENCES MDI.MDIS35_SCE_PROJ (SCE_PROJ_ID) ON DELETE CASCADE,
	CONSTRAINT MDIS36_FK02i FOREIGN KEY (RELATED_ID) REFERENCES MDI.MDIS35_SCE_PROJ (SCE_PROJ_ID) ON DELETE CASCADE,
	CONSTRAINT MDIS36_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS36_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIS36_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
GRANT SELECT ON MDI.MDIS36_RELATION TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIS36_RELATION TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIS36_RELATION TO MDI_R_USER;
GRANT DELETE ON MDI.MDIS36_RELATION TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIS36_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIS36_RELATION
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS36_RELATION',
				TO_CHAR(:NEW.RELATION_ID)||'-'||TO_CHAR(:NEW.RELATED_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS36_RELATION',
				TO_CHAR(:NEW.RELATION_ID)||'-'||TO_CHAR(:NEW.RELATED_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIS36_RELATION',
				TO_CHAR(:OLD.RELATION_ID)||'-'||TO_CHAR(:OLD.RELATED_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--SCE SIM ALT
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT DROP CONSTRAINT MDIS42_FK5;
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT DROP CONSTRAINT MDIS42_FK4;
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT DROP CONSTRAINT MDIS42_FK3;
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT ADD CONSTRAINT MDIS42_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT ADD CONSTRAINT MDIS42_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS42_SCE_SIM_ALT ADD CONSTRAINT MDIS42_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS42_SCEPROJID ON MDI.MDIS42_SCE_SIM_ALT (SCE_PROJ_ID);
--User Project
CREATE TABLE MDI.MDIU70_USER_PROJECT(
	SCE_PROJ_ID NUMBER(9) NOT NULL,
	USER_ID NUMBER(9) NOT NULL,
	ROLE_ID NUMBER(9) NOT NULL,
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIU70_PK PRIMARY KEY (SCE_PROJ_ID,USER_ID),
	CONSTRAINT MDIU70_FK1 FOREIGN KEY (SCE_PROJ_ID) REFERENCES MDI.MDIS35_SCE_PROJ (SCE_PROJ_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU70_FK2 FOREIGN KEY (USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE CASCADE,
	CONSTRAINT MDIU70_FK5 FOREIGN KEY (ROLE_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE,
	CONSTRAINT MDIU70_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU70_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIU70_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
CREATE INDEX MDI.MDIU70_SCEPROJID ON MDI.MDIU70_USER_PROJECT (SCE_PROJ_ID);
CREATE INDEX MDI.MDIU70_USERID ON MDI.MDIU70_USER_PROJECT (USER_ID);
GRANT SELECT ON MDI.MDIU70_USER_PROJECT TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIU70_USER_PROJECT TO MDI_R_USER;
GRANT UPDATE ON MDI.MDIU70_USER_PROJECT TO MDI_R_USER;
GRANT DELETE ON MDI.MDIU70_USER_PROJECT TO MDI_R_USER;
/
CREATE OR REPLACE TRIGGER MDIU70_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIU70_USER_PROJECT
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU70_USER_PROJECT',
				TO_CHAR(:NEW.SCE_PROJ_ID)||'-'||TO_CHAR(:NEW.USER_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU70_USER_PROJECT',
				TO_CHAR(:NEW.SCE_PROJ_ID)||'-'||TO_CHAR(:NEW.USER_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIU70_USER_PROJECT',
				TO_CHAR(:OLD.SCE_PROJ_ID)||'-'||TO_CHAR(:OLD.USER_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--PROJ
ALTER TABLE MDI.MDI112_PROJ DROP CONSTRAINT MDI112_FK9;
ALTER TABLE MDI.MDI112_PROJ DROP CONSTRAINT MDI112_FK8;
ALTER TABLE MDI.MDI112_PROJ DROP CONSTRAINT MDI112_FK7;
ALTER TABLE MDI.MDI112_PROJ ADD CONSTRAINT MDI112_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI112_PROJ ADD CONSTRAINT MDI112_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI112_PROJ ADD CONSTRAINT MDI112_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI112_I1;
DROP INDEX MDI112_I2;
CREATE INDEX MDI.MDI112_PLANYEAR_SIMID ON MDI.MDI112_PROJ (PLANYEAR,SIM_ID);
CREATE INDEX MDI.MDI112_PLANYEAR_SUBID ON MDI.MDI112_PROJ (PLANYEAR,SUB_ID);
--SIM SUB
ALTER TABLE MDI.MDI115_SIM_SUB DROP CONSTRAINT MDI115_FK8;
ALTER TABLE MDI.MDI115_SIM_SUB DROP CONSTRAINT MDI115_FK7;
ALTER TABLE MDI.MDI115_SIM_SUB DROP CONSTRAINT MDI115_FK6;
ALTER TABLE MDI.MDI115_SIM_SUB ADD CONSTRAINT MDI115_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI115_SIM_SUB ADD CONSTRAINT MDI115_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI115_SIM_SUB ADD CONSTRAINT MDI115_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI115_I;
CREATE INDEX MDI.MDI115_PLANYEAR_SIMID_PROJID ON MDI.MDI115_SIM_SUB (PLANYEAR,SIM_ID,PROJ_ID);
--BANK
ALTER TABLE MDI.MDI400_BANK MODIFY BASE_KV FLOAT(24);
ALTER TABLE MDI.MDI400_BANK DROP CONSTRAINT MDI400_FK7;
ALTER TABLE MDI.MDI400_BANK DROP CONSTRAINT MDI400_FK6;
ALTER TABLE MDI.MDI400_BANK DROP CONSTRAINT MDI400_FK5;
ALTER TABLE MDI.MDI400_BANK ADD CONSTRAINT MDI400_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI400_BANK ADD CONSTRAINT MDI400_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI400_BANK ADD CONSTRAINT MDI400_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI400_I;
DROP INDEX MDI400_I1;
DROP INDEX MDI400_I2;
CREATE INDEX MDI.MDI400_PLANYEAR_SIMID_INSERVICEPROJID ON MDI.MDI400_BANK (PLANYEAR,SIM_ID,IN_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI400_PLANYEAR_SIMID_OUTSERVICEPROJID ON MDI.MDI400_BANK (PLANYEAR,SIM_ID,OUT_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI400_PLANYEAR_SUBID ON MDI.MDI400_BANK (PLANYEAR,SUB_ID);
--BANK DAILY
ALTER TABLE MDI.MDI410_BANK_DAILY DROP CONSTRAINT MDI410_FK4;
ALTER TABLE MDI.MDI410_BANK_DAILY DROP CONSTRAINT MDI410_FK3;
ALTER TABLE MDI.MDI410_BANK_DAILY DROP CONSTRAINT MDI410_FK2;
ALTER TABLE MDI.MDI410_BANK_DAILY ADD CONSTRAINT MDI410_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI410_BANK_DAILY ADD CONSTRAINT MDI410_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI410_BANK_DAILY ADD CONSTRAINT MDI410_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI410_I;
--XFMR
ALTER TABLE MDI.MDI430_XFMR MODIFY BASE_KV FLOAT(24);
ALTER TABLE MDI.MDI430_XFMR DROP CONSTRAINT MDI430_FK7;
ALTER TABLE MDI.MDI430_XFMR DROP CONSTRAINT MDI430_FK6;
ALTER TABLE MDI.MDI430_XFMR DROP CONSTRAINT MDI430_FK5;
ALTER TABLE MDI.MDI430_XFMR ADD CONSTRAINT MDI430_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI430_XFMR ADD CONSTRAINT MDI430_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI430_XFMR ADD CONSTRAINT MDI430_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI430_I1;
DROP INDEX MDI430_I2;
DROP INDEX MDI430_I3;
CREATE INDEX MDI.MDI430_PLANYEAR_SIMID_BANKID ON MDI.MDI430_XFMR (PLANYEAR,SIM_ID,BANK_ID);
CREATE INDEX MDI.MDI430_PLANYEAR_SIMID_INSERVICEPROJID ON MDI.MDI430_XFMR (PLANYEAR,SIM_ID,IN_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI430_PLANYEAR_SIMID_OUTSERVICEPROJID ON MDI.MDI430_XFMR (PLANYEAR,SIM_ID,OUT_SERVICE_PROJ_ID);
--SUB VAR
ALTER TABLE MDI.MDI460_SUB_VAR DROP CONSTRAINT MDI460_FK6;
ALTER TABLE MDI.MDI460_SUB_VAR DROP CONSTRAINT MDI460_FK5;
ALTER TABLE MDI.MDI460_SUB_VAR DROP CONSTRAINT MDI460_FK4;
ALTER TABLE MDI.MDI460_SUB_VAR ADD CONSTRAINT MDI460_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI460_SUB_VAR ADD CONSTRAINT MDI460_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI460_SUB_VAR ADD CONSTRAINT MDI460_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI460_I;
DROP INDEX MDI460_I1;
DROP INDEX MDI460_I2;
DROP INDEX MDI460_U;
CREATE INDEX MDI.MDI460_PLANYEAR_SIMID_INSERVICEPROJID ON MDI.MDI460_SUB_VAR (PLANYEAR,SIM_ID,IN_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI460_PLANYEAR_SIMID_OUTSERVICEPROJID ON MDI.MDI460_SUB_VAR (PLANYEAR,SIM_ID,OUT_SERVICE_PROJ_ID);
CREATE INDEX MDI.MDI460_PLANYEAR_SUBID ON MDI.MDI460_SUB_VAR (PLANYEAR,SUB_ID);
--PROJ ELEM
ALTER TABLE MDI.MDI550_PROJ_ELEM DROP CONSTRAINT MDI550_FK5;
ALTER TABLE MDI.MDI550_PROJ_ELEM DROP CONSTRAINT MDI550_FK4;
ALTER TABLE MDI.MDI550_PROJ_ELEM DROP CONSTRAINT MDI550_FK3;
ALTER TABLE MDI.MDI550_PROJ_ELEM ADD CONSTRAINT MDI550_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI550_PROJ_ELEM ADD CONSTRAINT MDI550_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI550_PROJ_ELEM ADD CONSTRAINT MDI550_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI550_PLANYEAR_SIMID_PROJID ON MDI.MDI550_PROJ_ELEM (PLANYEAR,SIM_ID,PROJ_ID);
--PROJ ELEM COST
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST DROP CONSTRAINT MDI560_FK5;
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST DROP CONSTRAINT MDI560_FK4;
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST DROP CONSTRAINT MDI560_FK3;
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST ADD CONSTRAINT MDI560_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST ADD CONSTRAINT MDI560_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI560_PROJ_ELEM_COST ADD CONSTRAINT MDI560_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI560_I1;
CREATE INDEX MDI.MDI560_PLANYEAR_SIMID_PROJID_ELEMID ON MDI.MDI560_PROJ_ELEM_COST (PLANYEAR,SIM_ID,PROJ_ID,ELEM_ID);
--PROJ ELEM COST YEAR
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDI565_FK4;
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDI565_FK3;
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR DROP CONSTRAINT MDI565_FK2;
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDI565_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDI565_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI565_PROJ_ELEM_COST_YEAR ADD CONSTRAINT MDI565_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--DG DERAT
ALTER TABLE MDI.MDI830_DG_DERAT ADD SIM_ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDI830_DG_DERAT ADD PROJ_ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN SCE_PROJ_REV_ID;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN PRIORITY;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN PRIORITY_REASON;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN PRIORITY_NOTES;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN FOUR_KV_CUTOVER;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN CKT_OFFLOAD_TYPE;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN GROWTH_AREA;
ALTER TABLE MDI.MDI830_DG_DERAT DROP COLUMN BANK_INCREASE;
ALTER TABLE MDI.MDI830_DG_DERAT DROP CONSTRAINT MDI830_FK4;
ALTER TABLE MDI.MDI830_DG_DERAT DROP CONSTRAINT MDI830_FK3;
ALTER TABLE MDI.MDI830_DG_DERAT DROP CONSTRAINT MDI830_FK2;
ALTER TABLE MDI.MDI830_DG_DERAT DROP CONSTRAINT MDI830_FKI;
ALTER TABLE MDI.MDI830_DG_DERAT ADD CONSTRAINT MDI830_FKI FOREIGN KEY (PLANYEAR,SIM_ID,PROJ_ID) REFERENCES MDI.MDI112_PROJ (PLANYEAR,SIM_ID,PROJ_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI830_DG_DERAT ADD CONSTRAINT MDI830_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI830_DG_DERAT ADD CONSTRAINT MDI830_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI830_DG_DERAT ADD CONSTRAINT MDI830_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI830_PLANYEAR_SIMID_PROJID ON MDI.MDI830_DG_DERAT (PLANYEAR,SIM_ID,PROJ_ID);
--SIM ALT
ALTER TABLE MDI.MDI910_SIM_ALT DROP CONSTRAINT MDI910_FK3;
ALTER TABLE MDI.MDI910_SIM_ALT DROP CONSTRAINT MDI910_FK5;
ALTER TABLE MDI.MDI910_SIM_ALT DROP CONSTRAINT MDI910_FK4;
ALTER TABLE MDI.MDI910_SIM_ALT ADD CONSTRAINT MDI910_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI910_SIM_ALT ADD CONSTRAINT MDI910_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI910_SIM_ALT ADD CONSTRAINT MDI910_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI910_PLANYEAR_SIMID_PROJID ON MDI.MDI910_SIM_ALT (PLANYEAR,SIM_ID,PROJ_ID);
--SYS YEAR PROJ
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ DROP CONSTRAINT MDI210_FK5;
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ DROP CONSTRAINT MDI210_FK4;
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ DROP CONSTRAINT MDI210_FK6;
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ ADD CONSTRAINT MDI210_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ ADD CONSTRAINT MDI210_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI210_SYS_YEAR_PROJ ADD CONSTRAINT MDI210_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PROG ELEM
ALTER TABLE MDI.MDI540_PROG_ELEM DROP CONSTRAINT MDI540_FK5;
ALTER TABLE MDI.MDI540_PROG_ELEM DROP CONSTRAINT MDI540_FK4;
ALTER TABLE MDI.MDI540_PROG_ELEM DROP CONSTRAINT MDI540_FK3;
ALTER TABLE MDI.MDI540_PROG_ELEM ADD CONSTRAINT MDI540_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI540_PROG_ELEM ADD CONSTRAINT MDI540_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI540_PROG_ELEM ADD CONSTRAINT MDI540_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI540_PLANYEAR_PROGID ON MDI.MDI540_PROG_ELEM (PLANYEAR,PROG_ID);
--SYS YEAR COST
ALTER TABLE MDI.MDI545_SYS_YEAR_COST DROP CONSTRAINT MDI545_FK6;
ALTER TABLE MDI.MDI545_SYS_YEAR_COST DROP CONSTRAINT MDI545_FK5;
ALTER TABLE MDI.MDI545_SYS_YEAR_COST DROP CONSTRAINT MDI545_FK4;
ALTER TABLE MDI.MDI545_SYS_YEAR_COST ADD CONSTRAINT MDI545_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI545_SYS_YEAR_COST ADD CONSTRAINT MDI545_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI545_SYS_YEAR_COST ADD CONSTRAINT MDI545_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SUB UNIT COST
ALTER TABLE MDI.MDI555_SUB_UNIT_COST MODIFY VOLTAGE_KV FLOAT(24);
ALTER TABLE MDI.MDI555_SUB_UNIT_COST DROP CONSTRAINT MDI555_FK5;
ALTER TABLE MDI.MDI555_SUB_UNIT_COST DROP CONSTRAINT MDI555_FK4;
ALTER TABLE MDI.MDI555_SUB_UNIT_COST DROP CONSTRAINT MDI555_FK3;
ALTER TABLE MDI.MDI555_SUB_UNIT_COST ADD CONSTRAINT MDI555_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI555_SUB_UNIT_COST ADD CONSTRAINT MDI555_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI555_SUB_UNIT_COST ADD CONSTRAINT MDI555_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI555_I1;
DROP INDEX MDI555_I2;
DROP INDEX MDI555_U;
CREATE INDEX MDI.MDI555_PLANYEAR_ELEMID ON MDI.MDI555_SUB_UNIT_COST (PLANYEAR,ELEM_ID);
--SUB TYPE
ALTER TABLE MDI.MDI090_SUB_TYPE DROP CONSTRAINT MDI090_FK2;
ALTER TABLE MDI.MDI090_SUB_TYPE DROP CONSTRAINT MDI090_FK4;
ALTER TABLE MDI.MDI090_SUB_TYPE DROP CONSTRAINT MDI090_FK3;
ALTER TABLE MDI.MDI090_SUB_TYPE ADD CONSTRAINT MDI090_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI090_SUB_TYPE ADD CONSTRAINT MDI090_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI090_SUB_TYPE ADD CONSTRAINT MDI090_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI090_U;
CREATE INDEX MDI.MDI090_PLANYEAR ON MDI.MDI090_SUB_TYPE (PLANYEAR);
--SUB
ALTER TABLE MDI.MDI105_SUB MODIFY PRIMARY_KV FLOAT(24);
ALTER TABLE MDI.MDI105_SUB MODIFY SECONDARY_KV FLOAT(24);
ALTER TABLE MDI.MDI105_SUB DROP CONSTRAINT MDI105_FK7;
ALTER TABLE MDI.MDI105_SUB DROP CONSTRAINT MDI105_FK6;
ALTER TABLE MDI.MDI105_SUB DROP CONSTRAINT MDI105_FK5;
ALTER TABLE MDI.MDI105_SUB ADD CONSTRAINT MDI105_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI105_SUB ADD CONSTRAINT MDI105_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI105_SUB ADD CONSTRAINT MDI105_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI105_I;
DROP INDEX MDI105_U1;
CREATE INDEX MDI.MDI105_PLANYEAR_DISTRICTID ON MDI.MDI105_SUB (PLANYEAR,DISTRICT_ID);
--SUB MONTHLY
ALTER TABLE MDI.MDI140_SUB_MONTHLY DROP CONSTRAINT MDI140_FK4;
ALTER TABLE MDI.MDI140_SUB_MONTHLY DROP CONSTRAINT MDI140_FK3;
ALTER TABLE MDI.MDI140_SUB_MONTHLY DROP CONSTRAINT MDI140_FK2;
ALTER TABLE MDI.MDI140_SUB_MONTHLY ADD CONSTRAINT MDI140_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI140_SUB_MONTHLY ADD CONSTRAINT MDI140_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI140_SUB_MONTHLY ADD CONSTRAINT MDI140_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--SUB DAILY
ALTER TABLE MDI.MDI150_SUB_DAILY DROP CONSTRAINT MDI150_FK4;
ALTER TABLE MDI.MDI150_SUB_DAILY DROP CONSTRAINT MDI150_FK3;
ALTER TABLE MDI.MDI150_SUB_DAILY DROP CONSTRAINT MDI150_FK2;
ALTER TABLE MDI.MDI150_SUB_DAILY ADD CONSTRAINT MDI150_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI150_SUB_DAILY ADD CONSTRAINT MDI150_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI150_SUB_DAILY ADD CONSTRAINT MDI150_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI150_I;
--SUB FILE
ALTER TABLE MDI.MDI160_SUB_FILE DROP CONSTRAINT MDI160_FK4;
ALTER TABLE MDI.MDI160_SUB_FILE DROP CONSTRAINT MDI160_FK3;
ALTER TABLE MDI.MDI160_SUB_FILE DROP CONSTRAINT MDI160_FK2;
ALTER TABLE MDI.MDI160_SUB_FILE ADD CONSTRAINT MDI160_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI160_SUB_FILE ADD CONSTRAINT MDI160_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI160_SUB_FILE ADD CONSTRAINT MDI160_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI160_I;
CREATE INDEX MDI.MDI160_PLANYEAR_SUBID ON MDI.MDI160_SUB_FILE (PLANYEAR,SUB_ID);
--REDBOOK SCD
ALTER TABLE MDI.MDI475_REDBOOK_SCD DROP CONSTRAINT MDI475_FK2;
ALTER TABLE MDI.MDI475_REDBOOK_SCD DROP CONSTRAINT MDI475_FK4;
ALTER TABLE MDI.MDI475_REDBOOK_SCD DROP CONSTRAINT MDI475_FK3;
ALTER TABLE MDI.MDI475_REDBOOK_SCD ADD CONSTRAINT MDI475_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI475_REDBOOK_SCD ADD CONSTRAINT MDI475_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI475_REDBOOK_SCD ADD CONSTRAINT MDI475_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI475_PLANYEAR_SUBID ON MDI.MDI475_REDBOOK_SCD (PLANYEAR,SUB_ID);
--ABANK
ALTER TABLE MDI.MDI107_ABANK ADD CONSTRAINT MDI107_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI107_ABANK ADD CONSTRAINT MDI107_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI107_ABANK ADD CONSTRAINT MDI107_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--ABANK YEAR
ALTER TABLE MDI.MDI120_ABANK_YEAR DROP CONSTRAINT MDI120_FK6;
ALTER TABLE MDI.MDI120_ABANK_YEAR DROP CONSTRAINT MDI120_FK5;
ALTER TABLE MDI.MDI120_ABANK_YEAR DROP CONSTRAINT MDI120_FK4;
ALTER TABLE MDI.MDI120_ABANK_YEAR ADD CONSTRAINT MDI120_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI120_ABANK_YEAR ADD CONSTRAINT MDI120_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI120_ABANK_YEAR ADD CONSTRAINT MDI120_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI120_I;
--USER SYS
ALTER TABLE MDI.MDI490_USER_SYS DROP CONSTRAINT MDI490_FK3;
ALTER TABLE MDI.MDI490_USER_SYS DROP CONSTRAINT MDI490_FK5;
ALTER TABLE MDI.MDI490_USER_SYS DROP CONSTRAINT MDI490_FK4;
ALTER TABLE MDI.MDI490_USER_SYS ADD CONSTRAINT MDI490_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI490_USER_SYS ADD CONSTRAINT MDI490_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI490_USER_SYS ADD CONSTRAINT MDI490_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI490_USERNAMEID ON MDI.MDI490_USER_SYS (USERNAME_ID);
--SIM SYS
ALTER TABLE MDI.MDI062_SIM_SYS DROP CONSTRAINT MDI062_FK5;
ALTER TABLE MDI.MDI062_SIM_SYS DROP CONSTRAINT MDI062_FK4;
ALTER TABLE MDI.MDI062_SIM_SYS DROP CONSTRAINT MDI062_FK3;
ALTER TABLE MDI.MDI062_SIM_SYS ADD CONSTRAINT MDI062_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI062_SIM_SYS ADD CONSTRAINT MDI062_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI062_SIM_SYS ADD CONSTRAINT MDI062_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--FLAG
ALTER TABLE MDI.MDI880_FLAG DROP CONSTRAINT MDI880_FK3;
ALTER TABLE MDI.MDI880_FLAG DROP CONSTRAINT MDI880_FK2;
ALTER TABLE MDI.MDI880_FLAG DROP CONSTRAINT MDI880_FK4;
ALTER TABLE MDI.MDI880_FLAG ADD CONSTRAINT MDI880_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI880_FLAG ADD CONSTRAINT MDI880_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI880_FLAG ADD CONSTRAINT MDI880_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI880_U;
CREATE INDEX MDI.MDI880_PLANYEAR ON MDI.MDI880_FLAG (PLANYEAR);
--ZONE
ALTER TABLE MDI.MDI030_ZONE DROP CONSTRAINT MDI030_FK4;
ALTER TABLE MDI.MDI030_ZONE DROP CONSTRAINT MDI030_FK3;
ALTER TABLE MDI.MDI030_ZONE DROP CONSTRAINT MDI030_FK2;
ALTER TABLE MDI.MDI030_ZONE ADD CONSTRAINT MDI030_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI030_ZONE ADD CONSTRAINT MDI030_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI030_ZONE ADD CONSTRAINT MDI030_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI030_U;
CREATE INDEX MDI.MDI030_PLANYEAR ON MDI.MDI030_ZONE (PLANYEAR);
--REGION
ALTER TABLE MDI.MDI040_REGION DROP CONSTRAINT MDI040_FK4;
ALTER TABLE MDI.MDI040_REGION DROP CONSTRAINT MDI040_FK3;
ALTER TABLE MDI.MDI040_REGION DROP CONSTRAINT MDI040_FK2;
ALTER TABLE MDI.MDI040_REGION ADD CONSTRAINT MDI040_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI040_REGION ADD CONSTRAINT MDI040_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI040_REGION ADD CONSTRAINT MDI040_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI040_I;
DROP INDEX MDI040_U1;
DROP INDEX MDI040_U2;
CREATE INDEX MDI.MDI040_PLANYEAR_ZONEID ON MDI.MDI040_REGION (PLANYEAR,ZONE_ID);
--DISTRICT
ALTER TABLE MDI.MDI050_DISTRICT DROP CONSTRAINT MDI050_FK4;
ALTER TABLE MDI.MDI050_DISTRICT DROP CONSTRAINT MDI050_FK3;
ALTER TABLE MDI.MDI050_DISTRICT DROP CONSTRAINT MDI050_FK2;
ALTER TABLE MDI.MDI050_DISTRICT ADD CONSTRAINT MDI050_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI050_DISTRICT ADD CONSTRAINT MDI050_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI050_DISTRICT ADD CONSTRAINT MDI050_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI050_I;
DROP INDEX MDI050_U1;
DROP INDEX MDI050_U2;
CREATE INDEX MDI.MDI050_PLANYEAR_REGIONID ON MDI.MDI050_DISTRICT (PLANYEAR,REGION_ID);
--PQ CUSTOMER SEGMENT
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT DROP CONSTRAINT MDI940_FK4;
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT DROP CONSTRAINT MDI940_FK3;
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT DROP CONSTRAINT MDI940_FK2;
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT ADD CONSTRAINT MDI940_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT ADD CONSTRAINT MDI940_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI940_PQ_CUSTOMER_SEGMENT ADD CONSTRAINT MDI940_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI940_U;
--PQ PROBLEM TYPE
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE DROP CONSTRAINT MDI960_FK4;
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE DROP CONSTRAINT MDI960_FK3;
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE DROP CONSTRAINT MDI960_FK2;
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE ADD CONSTRAINT MDI960_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE ADD CONSTRAINT MDI960_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI960_PQ_PROBLEM_TYPE ADD CONSTRAINT MDI960_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI960_U;
--PQ REASON TYPE
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE DROP CONSTRAINT MDI970_FK4;
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE DROP CONSTRAINT MDI970_FK3;
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE DROP CONSTRAINT MDI970_FK2;
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE ADD CONSTRAINT MDI970_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE ADD CONSTRAINT MDI970_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI970_PQ_REASON_TYPE ADD CONSTRAINT MDI970_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI970_U;
--PQ CUST CLASS
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS DROP CONSTRAINT MDI975_FK4;
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS DROP CONSTRAINT MDI975_FK3;
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS DROP CONSTRAINT MDI975_FK2;
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS ADD CONSTRAINT MDI975_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS ADD CONSTRAINT MDI975_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI975_PQ_CUST_CLASS ADD CONSTRAINT MDI975_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI975_U;
--PQ CALL ORIGIN
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN DROP CONSTRAINT MDI930_FK4;
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN DROP CONSTRAINT MDI930_FK3;
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN DROP CONSTRAINT MDI930_FK2;
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN ADD CONSTRAINT MDI930_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN ADD CONSTRAINT MDI930_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI930_PQ_CALL_ORIGIN ADD CONSTRAINT MDI930_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI930_U;
--PQ TROUBLE LOG
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG DROP CONSTRAINT MDI980_FK13;
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG DROP CONSTRAINT MDI980_FK12;
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG DROP CONSTRAINT MDI980_FK11;
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG ADD CONSTRAINT MDI980_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG ADD CONSTRAINT MDI980_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI980_PQ_TROUBLE_LOG ADD CONSTRAINT MDI980_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI980_I;
CREATE INDEX MDI.MDI980_PLANYEAR_DISTRICTID ON MDI.MDI980_PQ_TROUBLE_LOG (PLANYEAR,DISTRICT_ID);
--PQ EQUIPMENT
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT DROP CONSTRAINT MDI950_FK4;
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT DROP CONSTRAINT MDI950_FK3;
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT DROP CONSTRAINT MDI950_FK2;
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT ADD CONSTRAINT MDI950_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT ADD CONSTRAINT MDI950_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI950_PQ_EQUIPMENT ADD CONSTRAINT MDI950_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI950_U;
--PQ EQU INV
ALTER TABLE MDI.MDI987_PQ_EQU_INV DROP CONSTRAINT MDI986_FK1I;
ALTER TABLE MDI.MDI987_PQ_EQU_INV DROP CONSTRAINT MDI986_FK5;
ALTER TABLE MDI.MDI987_PQ_EQU_INV DROP CONSTRAINT MDI986_FK4;
ALTER TABLE MDI.MDI987_PQ_EQU_INV DROP CONSTRAINT MDI986_FK3;
ALTER TABLE MDI.MDI987_PQ_EQU_INV DROP CONSTRAINT MDI986_FK2;
ALTER TABLE MDI.MDI987_PQ_EQU_INV ADD CONSTRAINT MDI987_FK1I FOREIGN KEY (EQUIP_ID) REFERENCES MDI.MDI950_PQ_EQUIPMENT (EQUIP_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI987_PQ_EQU_INV ADD CONSTRAINT MDI987_FK2 FOREIGN KEY (USERNAME_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI987_PQ_EQU_INV ADD CONSTRAINT MDI987_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI987_PQ_EQU_INV ADD CONSTRAINT MDI987_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI987_PQ_EQU_INV ADD CONSTRAINT MDI987_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI987_EQUIPID ON MDI.MDI987_PQ_EQU_INV (EQUIP_ID);
--PQ USE EQUIP
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP DROP CONSTRAINT MDI985_FK4;
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP DROP CONSTRAINT MDI985_FK3;
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP DROP CONSTRAINT MDI985_FK5;
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP ADD CONSTRAINT MDI985_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP ADD CONSTRAINT MDI985_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI985_PQ_USE_EQUIP ADD CONSTRAINT MDI985_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI985_PQID ON MDI.MDI985_PQ_USE_EQUIP (PQ_ID);
--PQ TROUBLE LOG FILE
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE DROP CONSTRAINT MDI990_FK4;
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE DROP CONSTRAINT MDI990_FK3;
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE DROP CONSTRAINT MDI990_FK2;
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE ADD CONSTRAINT MDI990_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE ADD CONSTRAINT MDI990_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI990_PQ_TROUBLE_LOG_FILE ADD CONSTRAINT MDI990_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI990_I;
CREATE INDEX MDI.MDI990_PQID ON MDI.MDI990_PQ_TROUBLE_LOG_FILE (PQ_ID);
--USER
ALTER TABLE MDI.MDI000_USER DROP CONSTRAINT MDI000_FK4;
ALTER TABLE MDI.MDI000_USER DROP CONSTRAINT MDI000_FK3;
ALTER TABLE MDI.MDI000_USER DROP CONSTRAINT MDI000_FK2;
ALTER TABLE MDI.MDI000_USER ADD CONSTRAINT MDI000_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI000_USER ADD CONSTRAINT MDI000_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI000_USER ADD CONSTRAINT MDI000_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI000_U;
CREATE INDEX MDI.MDI000_ORGID ON MDI.MDI000_USER (ORG_ID);
--USER FILE
ALTER TABLE MDI.MDI007_USER_FILE DROP CONSTRAINT MDI007_FK4;
ALTER TABLE MDI.MDI007_USER_FILE DROP CONSTRAINT MDI007_FK3;
ALTER TABLE MDI.MDI007_USER_FILE DROP CONSTRAINT MDI007_FK2;
ALTER TABLE MDI.MDI007_USER_FILE ADD CONSTRAINT MDI007_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI007_USER_FILE ADD CONSTRAINT MDI007_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI007_USER_FILE ADD CONSTRAINT MDI007_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI007_USERID ON MDI.MDI007_USER_FILE (USER_ID);
--Issue
ALTER TABLE MDI.MDI008_ISSUE ADD ID NUMBER(9) NOT NULL;
ALTER TABLE MDI.MDI008_ISSUE ADD LOCATION VARCHAR2(64);
ALTER TABLE MDI.MDI008_ISSUE ADD PRIORITY NUMBER(9);
ALTER TABLE MDI.MDI008_ISSUE ADD SEVERITY NUMBER(9);
ALTER TABLE MDI.MDI008_ISSUE ADD SUMMARY VARCHAR2(50);
ALTER TABLE MDI.MDI008_ISSUE ADD CLOSED_DATE DATE;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN ISSUE_ID;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN ISSUE_LOC;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN PRIORITY_ID;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN SEVERITY_ID;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN ISSUE_SUMMARY;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN ASSIGNED_DATE;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN QA_DATE;
ALTER TABLE MDI.MDI008_ISSUE DROP COLUMN FIX_DATE;
ALTER TABLE MDI.MDI008_ISSUE DROP CONSTRAINT MDI008_FK12;
ALTER TABLE MDI.MDI008_ISSUE DROP CONSTRAINT MDI008_FK11;
ALTER TABLE MDI.MDI008_ISSUE DROP CONSTRAINT MDI008_FK10;
ALTER TABLE MDI.MDI008_ISSUE DROP CONSTRAINT MDI008_FK7;
ALTER TABLE MDI.MDI008_ISSUE DROP CONSTRAINT MDI008_FK6;
ALTER TABLE MDI.MDI008_ISSUE ADD CONSTRAINT MDI008_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI008_ISSUE ADD CONSTRAINT MDI008_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI008_ISSUE ADD CONSTRAINT MDI008_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI008_I1;
DROP INDEX MDI008_I2;
DROP INDEX MDI008_I3;
DROP INDEX MDI008_I4;
DROP INDEX MDI008_I5;
DROP INDEX MDI008_I6;
DROP INDEX MDI008_I7;
CREATE INDEX MDI.MDI008_ISSUERID ON MDI.MDI008_ISSUE (ISSUER_ID);
CREATE INDEX MDI.MDI008_RESPONDERID ON MDI.MDI008_ISSUE (RESPONDER_ID);
--Resolver
ALTER TABLE MDI.MDI009_RESOLVER DROP COLUMN CLOSED;
ALTER TABLE MDI.MDI009_RESOLVER DROP COLUMN COMMENTS;
ALTER TABLE MDI.MDI009_RESOLVER DROP CONSTRAINT MDI009_FK12;
ALTER TABLE MDI.MDI009_RESOLVER DROP CONSTRAINT MDI009_FK9;
ALTER TABLE MDI.MDI009_RESOLVER DROP CONSTRAINT MDI009_FK8;
ALTER TABLE MDI.MDI009_RESOLVER DROP CONSTRAINT MDI009_FK11;
ALTER TABLE MDI.MDI009_RESOLVER DROP CONSTRAINT MDI009_FK10;
ALTER TABLE MDI.MDI009_RESOLVER ADD CONSTRAINT MDI009_FK1 FOREIGN KEY (ISSUE_ID) REFERENCES MDI.MDI008_ISSUE (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI009_RESOLVER ADD CONSTRAINT MDI009_FK2 FOREIGN KEY (USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI009_RESOLVER ADD CONSTRAINT MDI009_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI009_RESOLVER ADD CONSTRAINT MDI009_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI009_RESOLVER ADD CONSTRAINT MDI009_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI009_I8;
DROP INDEX MDI009_I9;
CREATE INDEX MDI.MDI009_ISSUEID ON MDI.MDI009_RESOLVER (ISSUE_ID);
CREATE INDEX MDI.MDI009_USERID ON MDI.MDI009_RESOLVER (USER_ID);
--TIME CRISIS
ALTER TABLE MDI.MDI018_TIME_CRISIS MODIFY START_TIME NUMBER(22);
ALTER TABLE MDI.MDI018_TIME_CRISIS MODIFY END_TIME NUMBER(22);
ALTER TABLE MDI.MDI018_TIME_CRISIS DROP CONSTRAINT MDI018_FK3;
ALTER TABLE MDI.MDI018_TIME_CRISIS DROP CONSTRAINT MDI018_FK2;
ALTER TABLE MDI.MDI018_TIME_CRISIS DROP CONSTRAINT MDI018_FK4;
ALTER TABLE MDI.MDI018_TIME_CRISIS ADD CONSTRAINT MDI018_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI018_TIME_CRISIS ADD CONSTRAINT MDI018_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI018_TIME_CRISIS ADD CONSTRAINT MDI018_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI018_I;
CREATE INDEX MDI.MDI018_USERNAMEID ON MDI.MDI018_TIME_CRISIS (USERNAME_ID);
--USER SELECT
ALTER TABLE MDI.MDI510_USER_SELECT DROP CONSTRAINT MDI510_FK2;
ALTER TABLE MDI.MDI510_USER_SELECT DROP CONSTRAINT MDI510_FK4;
ALTER TABLE MDI.MDI510_USER_SELECT DROP CONSTRAINT MDI510_FK3;
ALTER TABLE MDI.MDI510_USER_SELECT ADD CONSTRAINT MDI510_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI510_USER_SELECT ADD CONSTRAINT MDI510_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI510_USER_SELECT ADD CONSTRAINT MDI510_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI510_USERNAMEID ON MDI.MDI510_USER_SELECT (USERNAME_ID);
--TEST SCRIPT
ALTER TABLE MDI.MDI991_TEST_SCRIPT DROP CONSTRAINT MDI991_FK4;
ALTER TABLE MDI.MDI991_TEST_SCRIPT DROP CONSTRAINT MDI991_FK3;
ALTER TABLE MDI.MDI991_TEST_SCRIPT DROP CONSTRAINT MDI991_FK2;
ALTER TABLE MDI.MDI991_TEST_SCRIPT ADD CONSTRAINT MDI991_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI991_TEST_SCRIPT ADD CONSTRAINT MDI991_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI991_TEST_SCRIPT ADD CONSTRAINT MDI991_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--TEST QUESTION
ALTER TABLE MDI.MDI992_TEST_QUESTION DROP CONSTRAINT MDI992_FK4;
ALTER TABLE MDI.MDI992_TEST_QUESTION DROP CONSTRAINT MDI992_FK3;
ALTER TABLE MDI.MDI992_TEST_QUESTION DROP CONSTRAINT MDI992_FK2;
ALTER TABLE MDI.MDI992_TEST_QUESTION ADD CONSTRAINT MDI992_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI992_TEST_QUESTION ADD CONSTRAINT MDI992_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI992_TEST_QUESTION ADD CONSTRAINT MDI992_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI992_SCRIPTID ON MDI.MDI992_TEST_QUESTION (SCRIPT_ID);
--TEST USER
ALTER TABLE MDI.MDI993_TEST_USER DROP CONSTRAINT MDI993_FK5;
ALTER TABLE MDI.MDI993_TEST_USER DROP CONSTRAINT MDI993_FK4;
ALTER TABLE MDI.MDI993_TEST_USER DROP CONSTRAINT MDI993_FK3;
ALTER TABLE MDI.MDI993_TEST_USER ADD CONSTRAINT MDI993_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI993_TEST_USER ADD CONSTRAINT MDI993_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI993_TEST_USER ADD CONSTRAINT MDI993_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI993_SCRIPTID ON MDI.MDI993_TEST_USER (SCRIPT_ID);
--TEST RESPONSE
ALTER TABLE MDI.MDI994_TEST_RESPONSE DROP CONSTRAINT MDI994_FK5;
ALTER TABLE MDI.MDI994_TEST_RESPONSE DROP CONSTRAINT MDI994_FK4;
ALTER TABLE MDI.MDI994_TEST_RESPONSE DROP CONSTRAINT MDI994_FK3;
ALTER TABLE MDI.MDI994_TEST_RESPONSE ADD CONSTRAINT MDI994_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI994_TEST_RESPONSE ADD CONSTRAINT MDI994_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI994_TEST_RESPONSE ADD CONSTRAINT MDI994_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDI994_SCRIPTID_USERNAMEID ON MDI.MDI994_TEST_RESPONSE (SCRIPT_ID,USERNAME_ID);
--PORTFOLIO
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP COLUMN ALT_DOUBLE1;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP COLUMN ALT_INT1;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP COLUMN ALT_VARCHAR1;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP COLUMN ALT_DATE1;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP CONSTRAINT MDISP00_FK03;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP CONSTRAINT MDISP00_FK02;
ALTER TABLE MDI.MDIS00_PORTFOLIO DROP CONSTRAINT MDISP00_FK01;
ALTER TABLE MDI.MDIS00_PORTFOLIO ADD CONSTRAINT MDIS00_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS00_PORTFOLIO ADD CONSTRAINT MDIS00_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS00_PORTFOLIO ADD CONSTRAINT MDIS00_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PUBLISH
ALTER TABLE MDI.MDIS07_PUBLISH DROP CONSTRAINT MDIS07_FK3;
ALTER TABLE MDI.MDIS07_PUBLISH DROP CONSTRAINT MDIS07_FK2;
ALTER TABLE MDI.MDIS07_PUBLISH DROP CONSTRAINT MDIS07_FK1;
ALTER TABLE MDI.MDIS07_PUBLISH ADD CONSTRAINT MDIS07_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS07_PUBLISH ADD CONSTRAINT MDIS07_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS07_PUBLISH ADD CONSTRAINT MDIS07_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--TRACKING DEFAULT
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT DROP CONSTRAINT MDIS10_FK3;
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT DROP CONSTRAINT MDIS10_FK2;
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT DROP CONSTRAINT MDIS10_FK1;
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT ADD CONSTRAINT MDIS10_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT ADD CONSTRAINT MDIS10_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS10_TRACKING_DEFAULT ADD CONSTRAINT MDIS10_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--TRACKING DEP DEFAULT
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT DROP CONSTRAINT MDIS11_FK4;
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT DROP CONSTRAINT MDIS11_FK3;
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT DROP CONSTRAINT MDIS11_FK5;
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT ADD CONSTRAINT MDIS11_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT ADD CONSTRAINT MDIS11_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIS11_TRACKING_DEP_DEFAULT ADD CONSTRAINT MDIS11_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
CREATE INDEX MDI.MDIS11_DEPTID ON MDI.MDIS11_TRACKING_DEP_DEFAULT (DEP_T_ID);
CREATE INDEX MDI.MDIS11_TID ON MDI.MDIS11_TRACKING_DEP_DEFAULT (T_ID);
--MITIGATION KEY CONSIDS
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS DROP CONSTRAINT MDIT130_FK04;
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS DROP CONSTRAINT MDIT130_FK03;
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS DROP CONSTRAINT MDIT130_FK02;
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS ADD CONSTRAINT MDIV40_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS ADD CONSTRAINT MDIV40_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIV40_MITIGATION_KEY_CONSIDS ADD CONSTRAINT MDIV40_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--PSP SERVICE
ALTER TABLE MDI.MDIZ10_PSP_SERVICE ADD CONSTRAINT MDIZ10_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIZ10_PSP_SERVICE ADD CONSTRAINT MDIZ10_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIZ10_PSP_SERVICE ADD CONSTRAINT MDIZ10_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX SYS_C008114;
DROP INDEX SYS_C008115;
--PSP RCD
ALTER TABLE MDI.MDIZ20_PSP_RCD DROP CONSTRAINT SYS_C009193;
ALTER TABLE MDI.MDIZ20_PSP_RCD ADD CONSTRAINT MDIZ20_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIZ20_PSP_RCD ADD CONSTRAINT MDIZ20_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDIZ20_PSP_RCD ADD CONSTRAINT MDIZ20_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDIZ20_PSP_RCD;
--PSP TEST
CREATE SEQUENCE MDI.MDIZ30_SEQ MINVALUE 1 MAXVALUE 999999999 CYCLE START WITH 1 INCREMENT BY 1 NOCACHE;
GRANT SELECT ON MDI.MDIZ30_SEQ TO MDI_R_INQUIRY;
CREATE TABLE MDI.MDIZ30_PSP_TEST(
	TEST_ID NUMBER(9) NOT NULL,
	SERVICE_ID NUMBER(9) NOT NULL,
	SERVICE_NAME VARCHAR2(255),
	INSERT_TS DATE,
	INSERT_USER_ID NUMBER(9,0),
	MODIFIED_TS DATE,
	MODIFIED_USER_ID NUMBER(9,0),
	DELETED_TS DATE,
	DELETED_USER_ID NUMBER(9,0),
	CONSTRAINT MDIZ30_PK PRIMARY KEY (TEST_ID),
	CONSTRAINT MDIZ30_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIZ30_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL,
	CONSTRAINT MDIZ30_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL
);
GRANT SELECT ON MDI.MDIZ30_PSP_TEST TO MDI_R_INQUIRY;
GRANT INSERT ON MDI.MDIZ30_PSP_TEST TO MDI_R_INQUIRY;
GRANT UPDATE ON MDI.MDIZ30_PSP_TEST TO MDI_R_INQUIRY;
GRANT DELETE ON MDI.MDIZ30_PSP_TEST TO MDI_R_INQUIRY;
/
CREATE OR REPLACE TRIGGER MDIZ30_T_DUI AFTER INSERT OR UPDATE OR DELETE ON MDI.MDIZ30_PSP_TEST
FOR EACH ROW
BEGIN
	IF(sys_context('USERENV','CLIENT_IDENTIFIER') IS NULL OR sys_context('USERENV','CLIENT_IDENTIFIER') != 'NON LOGGER') THEN
		IF INSERTING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIZ30_PSP_TEST',
				TO_CHAR(:NEW.TEST_ID),
				1,user,sys_context('userenv','host'));
		ELSIF UPDATING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIZ30_PSP_TEST',
				TO_CHAR(:NEW.TEST_ID),
				2,user,sys_context('userenv','host'));
		ELSIF DELETING THEN
			INSERT INTO MDI.MDI005_AUDIT(transaction_id,trans_timestamp,session_id,table_name,
				row_key,
				trans_type,username,host)
				VALUES(MDI.MDI005_SEQ.NEXTVAL,sysdate,TO_NUMBER(sys_context('userenv','sessionid')),'MDIZ30_PSP_TEST',
				TO_CHAR(:OLD.TEST_ID),
				3,user,sys_context('userenv','host'));
		END IF;
	END IF;
END;
/
--LOOK UP GROUP
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP DROP CONSTRAINT MDI004_FK12;
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP DROP CONSTRAINT MDI004_FK11;
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP DROP CONSTRAINT MDI004_FK10;
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP ADD CONSTRAINT MDI004_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP ADD CONSTRAINT MDI004_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI004_LOOK_UP_GROUP ADD CONSTRAINT MDI004_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
--LOOK UP
ALTER TABLE MDI.MDI006_LOOK_UP ADD IN_GROUP_ID NUMBER(9);
ALTER TABLE MDI.MDI006_LOOK_UP ADD PARENT_ID NUMBER(9);
ALTER TABLE MDI.MDI006_LOOK_UP ADD RANK FLOAT(24);
ALTER TABLE MDI.MDI006_LOOK_UP DROP CONSTRAINT MDI006_FK1;
ALTER TABLE MDI.MDI006_LOOK_UP DROP CONSTRAINT MDI006_FK12;
ALTER TABLE MDI.MDI006_LOOK_UP DROP CONSTRAINT MDI006_FK11;
ALTER TABLE MDI.MDI006_LOOK_UP DROP CONSTRAINT MDI006_FK10;
ALTER TABLE MDI.MDI006_LOOK_UP ADD CONSTRAINT MDI006_FK01 FOREIGN KEY (LOOK_UP_GROUP_ID) REFERENCES MDI.MDI004_LOOK_UP_GROUP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI006_LOOK_UP ADD CONSTRAINT MDI006_FK02 FOREIGN KEY (PARENT_ID) REFERENCES MDI.MDI006_LOOK_UP (ID) ON DELETE CASCADE;
ALTER TABLE MDI.MDI006_LOOK_UP ADD CONSTRAINT MDI006_FK_INSERTUSERID FOREIGN KEY (INSERT_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI006_LOOK_UP ADD CONSTRAINT MDI006_FK_MODIFIEDUSERID FOREIGN KEY (MODIFIED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
ALTER TABLE MDI.MDI006_LOOK_UP ADD CONSTRAINT MDI006_FK_DELETEDUSERID FOREIGN KEY (DELETED_USER_ID) REFERENCES MDI.MDI000_USER (USERNAME_ID) ON DELETE SET NULL;
DROP INDEX MDI006_I1;
CREATE INDEX MDI.MDI006_LOOKUPGROUPID ON MDI.MDI006_LOOK_UP (LOOK_UP_GROUP_ID);
CREATE INDEX MDI.MDI006_PARENTID ON MDI.MDI006_LOOK_UP (PARENT_ID);
/* Undo Commands
DROP TABLE MDI.MDIZ30_PSP_TEST;
DROP SEQUENCE MDI.MDIZ30_SEQ;
DROP TABLE MDI.MDIU70_USER_PROJECT;
DROP TABLE MDI.MDIS36_RELATION;
DROP TABLE MDI.MDIS34_PORTFOLIO_PROJ;
DROP SEQUENCE MDI.MDIS34_SEQ;
DROP TABLE MDI.MDIU80_COST_LOADER_RATE;
DROP TABLE MDI.MDIS02_CUSTOMER;
DROP SEQUENCE MDI.MDIS02_SEQ;
DROP TABLE MDI.MDIS87_COST_ALLOCATION;
DROP TABLE MDI.MDIU75_OVERHEAD_LOADER_RATE;
DROP SEQUENCE MDI.MDIU75_SEQ;
DROP TABLE MDI.MDIU10_DEFAULT_PART;
DROP SEQUENCE MDI.MDIU10_SEQ;
DROP TABLE MDI.MDISX8_SCOPE_TYPE_CPR;
DROP SEQUENCE MDI.MDISX8_SEQ;
DROP TABLE MDI.MDISX7_PART_TYPE_CPR;
DROP SEQUENCE MDI.MDISX7_SEQ;
DROP TABLE MDI.MDIU60_SCOPE_TYPE_DESCRIPTIVE;
DROP TABLE MDI.MDIU55_DESCRIPTIVE_TYPE;
DROP SEQUENCE MDI.MDIU55_SEQ;
DROP TABLE MDI.MDIU62_SCOPE_ITEM_DESCRIPTIVE;
DROP TABLE MDI.MDIT10_GATE;
DROP SEQUENCE MDI.MDIT10_SEQ;
DROP TABLE MDI.MDIT15_GATE_TRACKING;
DROP SEQUENCE MDI.MDIT15_SEQ;
DROP TABLE MDI.MDIU65_BID_PACKAGE;
DROP SEQUENCE MDI.MDIU65_SEQ;
DROP TABLE MDI.MDIU67_BID_ITEM;
DROP TABLE MDI.MDIU33_SCOPE_ITEM_FORECAST;
DROP TABLE MDI.MDISC8_CPR_SUB;
DROP SEQUENCE MDI.MDISC8_SEQ;
DROP TABLE MDI.MDISC4_CPR_PRIME;
DROP SEQUENCE MDI.MDISC4_SEQ;
DROP TABLE MDI.MDISC6_CPR_SUB_ACCT;
DROP SEQUENCE MDI.MDISC6_SEQ;
DROP TABLE MDI.MDISP2_PART_TYPE;
DROP SEQUENCE MDI.MDISP2_SEQ;
DROP TABLE MDI.MDISX6_SCOPE_TYPE_ELEM;
DROP SEQUENCE MDI.MDISX6_SEQ;
DROP TABLE MDI.MDIU72_OVERHEAD_KEY;
DROP SEQUENCE MDI.MDIU72_SEQ;
DROP TABLE MDI.MDIU73_COST_SHEET_O_H;
DROP SEQUENCE MDI.MDIU73_SEQ;
*/