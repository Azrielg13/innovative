<article class="container_12">
	<h2>{{vendorCtrl.vendor.name}}</h2>
	<section class="grid_10">
		<div id="tab-global" class="tabs-content">
			<ul class="tabs js-tabs same-height">
				<li data-ng-repeat="tab in vendorCtrl.tabs" data-ng-class="{current: vendorCtrl.selectedTab == tab}">
					<a data-ng-click="vendorCtrl.setSelectedTab(tab)" title="{{tab}}">{{tab}}</a>
				</li>
			</ul>
			<div class="tabs-content">
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.calendar">
					<iis-calendar entity-type="vendor" entity-id="{{vendorCtrl.vendor.id}}"></iis-calendar>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.general">
					<div class="block-content form">
						<input type="checkbox" id="active" data-ng-model="vendorCtrl.vendor.active" data-ng-change="vendorCtrl.update('active')" />
						<label for="active">Active</label>
						<label for="name">Name</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.name" id="name" data-ng-change="vendorCtrl.update('name')" />
						<label>Address</label>
            <div data-dd4-address="vendorCtrl.update('address')" data-ng-model="vendorCtrl.vendor.address" class="full-width"></div>
						<label for="addrUnit">Unit #</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.address.unit" id="addrUnit" size="4" data-on-change="vendorCtrl.update('address')"/>
						<label for="phoneNumber">Phone Number</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.phoneNumber" id="phoneNumber" data-on-change="vendorCtrl.update('phoneNumber')"/>
						<label for="faxNumber">Fax Number</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.faxNumber" id="faxNumber" data-on-change="vendorCtrl.update('faxNumber')"/>
						<label for="contactName">Contact</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.contactName" id="contactName" data-on-change="vendorCtrl.update('contactName')"/>
						<label for="contactPhone">Contact Phone #</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.contactNumber" id="contactPhone" data-on-change="vendorCtrl.update('contactNumber')"/>
						<label for="contactEmail">Contact Email</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.contactEmail" id="contactEmail" data-on-change="vendorCtrl.update('contactEmail')"/>
						<label for="billingRate">Billing Rate</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingRate" id="billingRate" data-on-change="vendorCtrl.update('billingRate')"/>
						<label for="billingRateSoc">Billing Rate < 2hr SOC</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingRate2HrSoc" id="billingRateSoc" data-on-change="vendorCtrl.update('billingRate2HrSoc')"/>
						<label for="billingRateRoc">Billing Rate < 2hr ROC</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingRate2HrRoc" id="billingRateRoc" data-on-change="vendorCtrl.update('billingRate2HrRoc')"/>
						<label for="flatRate">Flat Rate</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingFlat" id="flatRate" data-on-change="vendorCtrl.update('billingFlat')"/>
						<label for="flatSoc">Flat < 2hr SOC</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingFlat2HrSoc" id="flatSoc" data-on-change="vendorCtrl.update('billingFlat2HrSoc')"/>
						<label for="flatRoc">Flat < 2hr ROC</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.billingFlat2HrRoc" id="flatRoc" data-on-change="vendorCtrl.update('billingFlat2HrRoc')"/>
						<label for="mileageRate">Mileage Rate</label>
						<input type="text" data-ng-model="vendorCtrl.vendor.mileageRate" id="mileageRate" data-on-change="vendorCtrl.update('mileageRate')"/>
						<label for="notes">Notes</label>
						<textarea data-ng-model="vendorCtrl.vendor.notes" id="notes" data-on-change="vendorCtrl.update('notes')"></textarea>
					</div>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.patients">
					<div data-dd4-table="vendorCtrl.TableType.PATIENTS"></div>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.pending">
					<div data-dd4-table="vendorCtrl.TableType.PENDING_ASSESSMENT"></div>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.billable">
          <div class="block-border">
            <h1>Billable</h1>
            <table class="table sortable no-margin" cellspacing="0" width="100%" data-page-length="25">
              <thead>
              <tr>
                <th class="black-cell"><span data-ng-class="{loading: tableCtrl.loading}"></span></th>
                <th>Patient</th>
                <th>Date</th>
                <th>Payment Type</th>
                <th>Billing Hours</th>
                <th>Hourly Rate</th>
                <th>Visit Pay</th>
                <th>Billing Mileage</th>
                <th>Mileage Rate</th>
                <th>Total</th>
              </tr>
              </thead>
              <tbody>
              <tr data-ng-repeat="billable in vendorCtrl.billables | orderBy:'start'">
                <td class="th table-check-cell">
                  <input type="checkbox" data-ng-model="billable.selected" data-ng-change="vendorCtrl.updateInvoice()"/>
                </td>
                <td><a href="#/assessment/{{billable.id}}">{{billable.patientName}}</a></td>
                <td>{{billable.start | date:'MM/dd/yyyy'}}</td>
                <td><select data-ng-model="billable.billingInfo.accountingTypeId"
                            data-ng-change="vendorCtrl.updateBillable(billable, 'billingInfo')"
                            data-ng-options="generalData.id as generalData.name for generalData in generalDataService.list(GeneralData.ACCOUNTING_TYPE) | orderBy:'name'">
                </select>
                </td>
                <td><input type="text" data-ng-model="billable.billingInfo.hours" style="width: 72px;"
                           data-on-change="vendorCtrl.updateBillable(billable, 'billingInfo')"/></td>
                <td><input type="text" data-ng-model="billable.billingInfo.hourlyRate" style="width: 72px;"
                           data-on-change="vendorCtrl.updateBillable(billable, 'billingInfo')"/></td>
                <td><input type="text" data-ng-model="billable.billingInfo.flatRate" style="width: 72px;"
                           data-on-change="vendorCtrl.updateBillable(billable, 'billingInfo')"/></td>
                <td><input type="text" data-ng-model="billable.billingInfo.mileage" style="width: 72px;"
                           data-on-change="vendorCtrl.updateBillable(billable, 'billingInfo')"/></td>
                <td><input type="text" data-ng-model="billable.billingInfo.mileageRate" style="width: 72px;"
                           data-on-change="vendorCtrl.updateBillable(billable, 'billingInfo')"/></td>
                <td>{{billable.billingInfo.total | currency}}</td>
              </tr>
              </tbody>
            </table>
          </div>
          <section class="grid_8">
            <div class="block-border">
              <div class="error-block"></div>
              <fieldset class="white-bg block-content form">
                <div class="columns">
                  <div class="colx3-left">
                    <label>Total Hours</label>
                    <div>{{vendorCtrl.invoice.loggedHours}}</div>
                  </div>
                  <div class="colx3-center">
                    <label>Total Mileage</label>
                    <div>{{vendorCtrl.invoice.billedMileage | currency}}</div>
                  </div>
                  <div class="colx3-right">
                    <label>Total Billing</label>
                    <div>{{vendorCtrl.invoice.totalDue | currency}}</div>
                  </div>
                </div>
                <label>Name</label><input type="text" data-ng-model="vendorCtrl.invoice.name">
                <button data-ng-click="vendorCtrl.createInvoice()">Create Invoice</button>
              </fieldset>
            </div>
          </section>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.invoices">
					<div data-dd4-table="vendorCtrl.TableType.UNPAID_INVOICES"></div>
					<div data-dd4-table="vendorCtrl.TableType.PAID_INVOICES"></div>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.reports">
					<a href="report.pdf?type=inv&vendorId={{vendorCtrl.vendor.id}}">Invoice</a>
				</div>
				<div data-ng-if="vendorCtrl.selectedTab == vendorCtrl.tabs.changeHistory">
					<div data-dd4-table="vendorCtrl.TableType.CHANGE_HISTORY"></div>
				</div>
			</div>
		</div>
	</section>
</article>